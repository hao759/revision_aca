import{a as J}from"./chunk-FB4BWV6Q.js";import"./chunk-FYYLBBTR.js";import{I as N,Jb as H,Kb as W,L as V,Lb as K,Nb as q,P as z,Q as A,R as B,U as L,Va as G,aa as R,s as F}from"./chunk-55Y7RW7N.js";import{Ac as n,Bc as m,Cb as b,Cc as P,Ed as U,Fa as v,Fc as S,Gc as T,Hc as w,Hd as Z,Rb as s,Tc as I,Vb as y,Vc as D,bc as e,cc as t,dc as C,hc as E,ib as l,kc as _,mc as M,nb as h,ra as d,sa as p,wb as x,wd as j,xd as k,yc as O}from"./chunk-XOKJR3V5.js";import"./chunk-WWX6BADO.js";function Q(a,g){if(a&1&&(e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),t(),e(7,"td"),n(8),I(9,"date"),t()()),a&2){let i=g.$implicit,o=g.index;l(2),m(o+1),l(2),m(i.name_file),l(2),m(i.count_image),l(2),m(D(9,4,i.created_date,"dd/MM/yyyy HH:mm"))}}function X(a,g){if(a&1&&(e(0,"div",22)(1,"div",5)(2,"div",6)(3,"div",23)(4,"table",24)(5,"thead",25)(6,"tr")(7,"th",26),n(8,"Id"),t(),e(9,"th",26),n(10,"T\xEAn file zip"),t(),e(11,"th",26),n(12,"S\u1ED1 l\u01B0\u1EE3ng h\xECnh"),t(),e(13,"th",26),n(14,"Ng\xE0y Upload"),t()()(),e(15,"tbody"),b(16,Q,10,7,"tr",27),t()()()()()()),a&2){let i=M();l(16),s("ngForOf",i.result)}}function Y(a,g){a&1&&(e(0,"div",28)(1,"ul",29)(2,"li",30),n(3,"L"),t(),e(4,"li",31),n(5,"O"),t(),e(6,"li",32),n(7,"A"),t(),e(8,"li",33),n(9,"D"),t(),e(10,"li",34),n(11,"I"),t(),e(12,"li",35),n(13,"N"),t(),e(14,"li",36),n(15,"G"),t()()())}var Ce=(()=>{class a{constructor(i,o,r){this.service=i,this.router=o,this.el=r,this.result=[],this.toast={visible_toast:!1,message_toast:"",background:""}}ngOnInit(){this.projectList=[{name:"UMER",project_id:30,promotion_id:1},{name:"Ken",project_id:34,promotion_id:1},{name:"Pepsi",project_id:31,promotion_id:1}],this.selected_project=this.projectList[0].project_id}toggleToast(i,o){this.toast.visible_toast=!0,this.toast.background=o,this.toast.message_toast=i,setTimeout(()=>{this.toast.visible_toast=!1},4e3)}onUpload(i){if(!(i.srcElement.files.length<1)){this.countZip=i.srcElement.files.length,console.log("event",i),this.preloading=!0;for(let o=0;o<i.srcElement.files.length;o++)console.log("event.srcElement",i.srcElement.files[o]),this.callAPI(i.srcElement.files[o])}}callAPI(i){this.subscription=this.service.upload_zip(i,this.selected_project).subscribe(o=>{o.message==0?this.toggleToast(this.countZip-1+" T\u1ED3n t\u1EA1i file: "+o.fileName,"bg-danger"):this.toggleToast(this.countZip-1+" T\u1EA3i th\xE0nh c\xF4ng: "+o.fileName,"bg-success"),this.countZip--,this.countZip==0&&(this.preloading=!1)},o=>{console.log(o),this.countZip--,this.countZip==0&&(this.preloading=!1),this.toggleToast(o,"bg-danger")})}Filter(){this.subscription=this.service.getall_upload_zip(this.selected_project).subscribe(i=>{console.log("data",i),this.result=i},i=>{console.log(i),this.toggleToast("C\xF3 l\u1ED7i x\u1EA3y ra, vui l\xF2ng th\u1EED l\u1EA1i","bg-danger")})}handleList(i){return i.map(o=>{o.created_date.replace("T"," "),console.log("created_date",o.created_date)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static{this.\u0275fac=function(o){return new(o||a)(h(J),h(F),h(v))}}static{this.\u0275cmp=x({type:a,selectors:[["app-upload-zip"]],decls:38,vars:13,consts:[["fileUploader",""],[1,"toast-custom",3,"autohide","delay","visible"],[1,"me-auto"],[1,"container-fluid","container1","py-4"],[1,"col-12","mb-4"],[1,"card","shadow-sm","border-0"],[1,"card-body"],[1,"row","align-items-center","g-3"],["md","4"],[1,"upload-content","text-center","p-3"],["type","file","hidden","","multiple","","accept","zip/*",3,"change"],["cButton","",1,"btn-upload",3,"click"],[1,"bi","bi-upload","me-2"],[1,"mt-2","small","text-muted"],[1,"form-label","fw-bold"],["cSelect","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],["md","1"],["cButton","",1,"btn-filter","w-100",3,"click"],[1,"bi","bi-funnel","me-2"],["class","col-12",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"col-12"],[1,"table-responsive"],[1,"table","table-hover","table-bordered","align-middle"],[1,"table-light"],["scope","col"],[4,"ngFor","ngForOf"],[1,"loading-overlay"],[1,"preload"],["data-title","L"],["data-title","O"],["data-title","A"],["data-title","D"],["data-title","I"],["data-title","N"],["data-title","G"]],template:function(o,r){if(o&1){let u=E();e(0,"c-toast",1)(1,"c-toast-header")(2,"strong",2),n(3,"Th\xF4ng b\xE1o"),t()(),e(4,"c-toast-body"),n(5),t()(),e(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"c-col",8)(12,"div",9)(13,"input",10,0),_("change",function(c){return d(u),p(r.onUpload(c))}),t(),e(15,"button",11),_("click",function(){d(u);let c=O(14);return p(c.click())}),C(16,"i",12),n(17,"Ch\u1ECDn File Zip "),t(),e(18,"p",13),n(19,"Ch\u1EC9 ch\u1EA5p nh\u1EADn file .zip"),t()()(),e(20,"c-col",8)(21,"label",14),n(22,"Ch\u1ECDn Project"),t(),e(23,"select",15),w("ngModelChange",function(c){return d(u),T(r.selected_project,c)||(r.selected_project=c),p(c)}),e(24,"option",16),n(25,"UMER"),t(),e(26,"option",16),n(27,"Ken"),t(),e(28,"option",16),n(29,"Pepsi"),t()()(),e(30,"c-col",17)(31,"label",14),n(32,"\xA0"),t(),e(33,"button",18),_("click",function(){return d(u),p(r.Filter())}),C(34,"i",19),n(35,"L\u1ECDc "),t()()()()()(),b(36,X,17,1,"div",20)(37,Y,16,0,"div",21),t()}o&2&&(s("autohide",!0)("delay",2e3)("visible",r.toast.visible_toast),l(4),y(r.toast.background),l(),P(" ",r.toast.message_toast," "),l(18),S("ngModel",r.selected_project),l(),s("value",30),l(2),s("value",34),l(2),s("value",31),l(8),s("ngIf",r.result.length>0),l(),s("ngIf",r.preloading))},dependencies:[G,R,L,A,B,z,N,V,Z,j,k,U,q,W,H,K],styles:["[_nghost-%COMP%]   c-card[_ngcontent-%COMP%]{min-width:9rem}.content[_ngcontent-%COMP%]{margin-top:50px;margin-left:50px;display:flex;justify-content:space-evenly}.container1[_ngcontent-%COMP%]{margin-bottom:90px}.flex1[_ngcontent-%COMP%]{justify-content:flex-start;display:flex;padding-left:20px}.font-medium[_ngcontent-%COMP%]{text-align:center;font-size:20px}.buttonUpload[_ngcontent-%COMP%]:hover, img[_ngcontent-%COMP%]{cursor:pointer}.hide1[_ngcontent-%COMP%]{opacity:0!important}ul[_ngcontent-%COMP%]{position:absolute;top:55%;left:50%;transform:translate(-50%,-50%) skew(-25deg);display:flex;margin:0;padding:0;border:4px solid rgb(24,176,176);box-shadow:0 20px 10px #0003}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;list-style:none;width:80px;height:80px;background:#18b0b0;font-size:3em;color:#0000001a;text-align:center;line-height:80px;box-sizing:border-box;overflow:hidden;margin:0 -1px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:attr(data-title);position:absolute;top:0;left:0;width:100%;height:100%;color:#262626;animation:_ngcontent-%COMP%_animate 2s linear infinite}@keyframes _ngcontent-%COMP%_animate{0%{top:-100%}20%{top:0%;background:transparent;color:#262626}40%{top:0%;background:#262626;color:#18b0b0}60%{top:0%;background:transparent;color:#262626}80%{top:-20%;background:transparent;color:#262626}to{top:100%}}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1):before{animation-delay:0s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2):before{animation-delay:.1s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3):before{animation-delay:.2s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4):before{animation-delay:.3s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5):before{animation-delay:.4s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6):before{animation-delay:.5s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7):before{animation-delay:.6s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(8):before{animation-delay:.7s}"]})}}return a})();export{Ce as UploadZipComponent};
