import{a as Me}from"./chunk-26M4WOOW.js";import{a as H}from"./chunk-RJESRZJ5.js";import{B as ve,C as Ie,T as Ce,fa as xe,gb as Pe}from"./chunk-OVEX3KHJ.js";import{a as be}from"./chunk-FYYLBBTR.js";import{Ab as ye,Cb as we,Ea as oe,H as Q,I as X,L as K,Qa as le,Ra as re,U as J,W as S,X as Y,Y as Z,Z as $,a as z,aa as ee,ca as te,cb as ae,d as G,db as se,eb as me,fb as ce,hb as pe,ia as ie,ib as de,kb as ge,lb as ue,mb as _e,vb as he,wb as fe,ya as ne,zb as Ee}from"./chunk-55Y7RW7N.js";import{Ac as r,Bc as R,Cb as C,Cc as f,Fc as w,Gc as v,Hc as I,Hd as N,Lc as B,Rb as u,Xc as W,ba as k,bc as i,cc as n,db as y,dc as h,ec as A,fc as L,ga as F,hc as b,ib as m,kc as g,mc as p,nb as T,ra as a,sa as s,sc as V,ta as x,tc as M,ua as P,uc as U,wb as j,wd as O,xd as q,yc as D}from"./chunk-XOKJR3V5.js";import{g as Ve}from"./chunk-WWX6BADO.js";var Te=Ve(Me());var Se=(()=>{class c{constructor(t){this.httpClient=t,this.rootAPI=be.apiUrl+"AttendanceAi/",this.urlEmployee={urlgetList:"ewo_ATD_getEmployeesPPT",urlExport:"ewo_ATD_exportEmployeesPPT"}}GetListEmployeePPT(t,o,e,l,_){return this.httpClient.post(this.rootAPI+this.urlEmployee.urlgetList,{project_id:t,qc_id:o,pageNumber:e,rowPerPage:l,employee_code:_})}exportEmployeePPT(t,o){console.log("EmployeePPT Export RawData: ");let e=new z({"Content-Type":"application/json"});return this.httpClient.post(this.rootAPI+this.urlEmployee.urlExport,{project_id:t,qc_id:o},{headers:e,responseType:"blob"})}static{this.\u0275fac=function(o){return new(o||c)(F(G))}}static{this.\u0275prov=k({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var Fe=["fileImg"],je=["myInputFile"];function Ae(c,E){if(c&1&&(i(0,"c-multi-select-option",38),r(1),n()),c&2){let t=E.$implicit;u("value",t.project_id)("selected",t.selected),m(),f(" ",t.project_name," ")}}function Le(c,E){if(c&1&&(i(0,"div")(1,"p",58),r(2,"Xem \u1EA3nh update:"),n(),h(3,"img",59),n()),c&2){let t=p(2);m(3),u("src",t.previewImage,y)}}function De(c,E){c&1&&(A(0),i(1,"p",60),r(2,"\u1EA2nh \u0111ang \u0111\u01B0\u1EE3c t\u1EA3i..."),n(),L())}function Re(c,E){if(c&1){let t=b();i(0,"img",61),g("click",function(){a(t);let e=p().$implicit,l=p();return s(l.showUpdateImage(e,2))})("load",function(){a(t);let e=p(2);return s(e.onImageLoad())})("error",function(e){a(t);let l=p(2);return s(l.replaceWithDefaultImage(e))}),n()}if(c&2){let t=p().$implicit;u("src",t.image_face_2,y)}}function Be(c,E){if(c&1&&(i(0,"div")(1,"p",58),r(2,"Xem \u1EA3nh 2 update:"),n(),h(3,"img",59),n()),c&2){let t=p(2);m(3),u("src",t.previewImage2,y)}}function We(c,E){if(c&1){let t=b();i(0,"tr")(1,"td",39),r(2),n(),i(3,"td",39)(4,"span",32),r(5),n(),r(6),n(),i(7,"td",39)(8,"div",40)(9,"div",41)(10,"img",42),g("click",function(){let e=a(t).$implicit,l=p();return s(l.showUpdateImage(e,1))})("error",function(e){a(t);let l=p();return s(l.replaceWithDefaultImage(e))}),n(),i(11,"span",43),r(12,"Xem v\xE0 update \u1EA3nh nh\xE2n vi\xEAn"),n()(),i(13,"c-modal",44),I("visibleChange",function(e){a(t);let l=p();return v(l.isUpdateImg,e)||(l.isUpdateImg=e),s(e)}),i(14,"c-modal-header")(15,"h5",45),r(16,"Update Image"),n(),i(17,"button",46),g("click",function(){a(t);let e=p();return s(e.resetImgUpdate())}),n()(),i(18,"c-modal-body")(19,"div",47)(20,"div")(21,"div",48)(22,"p",32),r(23,"Th\xF4ng tin nh\xE2n vi\xEAn: "),n(),i(24,"p"),r(25),n(),i(26,"p"),r(27),n()(),i(28,"div",49)(29,"div",50)(30,"label",32),r(31,"Image"),n(),h(32,"img",51),n()()(),i(33,"div")(34,"div")(35,"div",32),r(36,"Update \u1EA3nh nh\xE2n vi\xEAn"),n()(),i(37,"p",52),r(38,"Ch\u1ECDn \u1EA3nh update: "),n(),i(39,"input",53,1),g("change",function(e){a(t);let l=p();return s(l.onFileSelected(e,1))}),n(),C(41,Le,4,1,"div",54),i(42,"button",55),g("click",function(){a(t);let e=p();return s(e.resetImgUpdate())}),r(43,"Cancel"),n(),i(44,"button",56),g("click",function(){a(t);let e=p();return s(e.updateImage(1))}),r(45,"Update Image"),n()()()()()()(),i(46,"td",39)(47,"div",40)(48,"div",41),C(49,De,3,0,"ng-container",57)(50,Re,1,1,"ng-template",null,2,W),i(52,"span",43),r(53,"Xem v\xE0 update \u1EA3nh face 2 nh\xE2n vi\xEAn "),n()(),i(54,"c-modal",44),I("visibleChange",function(e){a(t);let l=p();return v(l.isUpdateImg_2,e)||(l.isUpdateImg_2=e),s(e)}),i(55,"c-modal-header")(56,"h5",45),r(57,"Update Image"),n(),i(58,"button",46),g("click",function(){a(t);let e=p();return s(e.resetImgUpdate())}),n()(),i(59,"c-modal-body")(60,"div",47)(61,"div")(62,"div",48)(63,"p",32),r(64,"Th\xF4ng tin nh\xE2n vi\xEAn: "),n(),i(65,"p"),r(66),n(),i(67,"p"),r(68),n()(),i(69,"div",49)(70,"div",50)(71,"label",32),r(72,"Image Face 2"),n(),h(73,"img",51),n()()(),i(74,"div")(75,"div")(76,"div",32),r(77,"Update \u1EA3nh nh\xE2n vi\xEAn"),n()(),i(78,"p",52),r(79,"Ch\u1ECDn \u1EA3nh 2 update: "),n(),i(80,"input",53),g("change",function(e){a(t);let l=p();return s(l.onFileSelected(e,2))}),n(),C(81,Be,4,1,"div",54),i(82,"button",55),g("click",function(){a(t);let e=p();return s(e.resetImgUpdate())}),r(83,"Cancel"),n(),i(84,"button",56),g("click",function(){a(t);let e=p();return s(e.updateImage(2))}),r(85,"Update Image"),n()()()()()()()()}if(c&2){let t=E.$implicit,o=D(51),e=p();m(2),f(" ",t.RowNumber," "),m(3),R(t.employee_code),m(),f(" - ",t.employee_name," "),m(4),u("src",t.image,y),m(3),w("visible",e.isUpdateImg),m(12),f("Code: ",e.oldEmpCode,""),m(2),f("Name: ",e.oldEmpName,""),m(5),u("src",e.oldImgUrl,y),m(9),u("ngIf",e.previewImage),m(8),u("ngIf",e.loadingImg)("ngIfElse",o),m(5),w("visible",e.isUpdateImg_2),m(12),f("Code: ",e.oldEmpCode,""),m(2),f("Name: ",e.oldEmpName,""),m(5),u("src",e.oldImgUrl_2,y),m(8),u("ngIf",e.previewImage2)}}var it=(()=>{class c{constructor(t,o){this.employeeATD=t,this.iconSet=o,this.employeesOption=[],this.employeeProfiles=[],this.employee_code="",this.projectIds=[{project_id:55,project_name:"attendance AI",selected:!0},{project_id:44,project_name:"Abbott",selected:!1}],this.selectedProject=null,this.projectIdRq=55,this.isUpdateImg=!1,this.isUpdateImg_2=!1,this.qc_id=9998,this.newImageUrl_2="",this.isLoading=!1,this.loadingImg=!0,this.currentPage=1,this.rowPerPageRq=0,this.pageNumberRq=0,this.totalRecords=0,this.rows=20,this.totalPages=0,this.showImportDialog=!1,this.dataColumnError=[],this.oldEmpCode="",this.oldEmpName="",this.oldImgUrl="",this.oldImgUrl_2="",this.newImageUrl=null,this.previewImage=null,this.newImageUrl2=null,this.previewImage2=null,o.icons={cilFilter:xe,cilArrowThickBottom:ve,cilArrowThickFromBottom:Ie,cilColorBorder:Ce,cilXCircle:Pe}}ngOnInit(){this.loadEmployee(1)}resetInput(){this.employee_code="",this.loadEmployee(1)}selectProjectId(){console.log(this.selectedProject),this.projectIdRq=this.selectedProject}filterEmployee(){this.loadEmployee(1),this.employee_code==""&&(this.currentPage=1)}calculateTotalPages(t,o=20){return Math.ceil(t/o)}replaceWithDefaultImage(t){t.target.src="https://png.pngtree.com/png-clipart/20190925/original/pngtree-no-avatar-vector-isolated-on-white-background-png-image_4979074.jpg",this.loadingImg=!1}onImageLoad(){this.loadingImg=!1}onPageChange(t){this.currentPage=t,this.loadEmployee(this.currentPage)}loadEmployee(t){this.currentPage=t,this.isLoading=!0,this.rowPerPageRq=this.rows,this.pageNumberRq=t,this.projectIdRq!==void 0&&this.projectIdRq!==null&&(this.isLoading=!0,this.employeeATD.GetListEmployeePPT(this.projectIdRq,this.qc_id,this.pageNumberRq,this.rowPerPageRq,this.employee_code).subscribe(o=>{(o.result=H.ok)&&(this.isLoading=!1,this.employeeProfiles=o?.data,o?.data.length==0&&(this.totalRecords=0),this.totalRecords=o.data[0].TotalRows,this.totalPages=this.calculateTotalPages(this.totalRecords,this.rows))},o=>{this.isLoading=!1,console.log(o)}))}exportEmployeesPPT(){this.isLoading=!0,console.log("Export PPT"),this.employeeATD.exportEmployeePPT(55,this.qc_id).subscribe(t=>{this.isLoading=!1;let o=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.presentationml.presentation"});(0,Te.saveAs)(o,"EmployeesPPT-55.xlsx")},t=>{this.isLoading=!1,console.log("Error downloading file",t)})}showImportTemplate(){this.showImportDialog=!0}importFileEmployeePPT(){console.log("Import File Employee")}clearDataImport(){this.dataColumnError=void 0,this.dataRowError=void 0}onChange(t){this.clearDataImport(),this.file=t.target.files[0],console.log("Khong co file: "),console.log(this.file)}updateImage(t){console.log("updatImage"),t==1?(console.log("Call api update Image Emloyee"),console.log("Gui anh len server..."),console.log(this.newImageUrl)):(console.log("Call api Update Image Face 2"),console.log("Gui anh len server..."),console.log(this.newImageUrl2))}showUpdateImage(t,o){console.log(t),this.oldEmpCode=t.employee_code,this.oldEmpName=t.employee_name,this.oldImgUrl=t.image,this.oldImgUrl_2=t.image_face_2,o==1?this.isUpdateImg=!0:this.isUpdateImg_2=!0,console.log(this.isUpdateImg),this.resetFileInput()}clearFileInput(){this.myInputFile.nativeElement.value=null,this.file=void 0}onFileSelected(t,o){let e=t.target.files?.[0];if(e){let l=new FileReader;console.log("Anh moi la:",l.result),o==1?l.onload=()=>{this.previewImage=l.result,this.newImageUrl=l.result}:l.onload=()=>{this.previewImage2=l.result,this.newImageUrl2=l.result},l.readAsDataURL(e)}}resetImgUpdate(){this.isUpdateImg=!1,this.isUpdateImg_2=!1,this.newImageUrl=null,this.previewImage=null,this.newImageUrl2=null,this.previewImage2=null}resetFileInput(){console.log(this.fileImg.nativeElement.value),console.log("Vao ham reset img..."),this.fileImg.nativeElement.value=""}static{this.\u0275fac=function(o){return new(o||c)(T(Se),T(S))}}static{this.\u0275cmp=j({type:c,selectors:[["app-employees-profile"]],viewQuery:function(o,e){if(o&1&&(V(Fe,5),V(je,5)),o&2){let l;M(l=U())&&(e.fileImg=l.first),M(l=U())&&(e.myInputFile=l.first)}},features:[B([S])],decls:65,vars:11,consts:[["myInputFile",""],["fileImg",""],["showImage",""],[1,"card","mb-3"],[1,"card-body"],[1,"row"],[1,"col-md-4"],[1,"form-label","fw-bold"],[1,"input-group"],["type","text","placeholder","Please fill Employee Code",1,"form-control",3,"ngModelChange","ngModel"],["cButton","","color","warning",3,"click"],[1,"d-flex","align-items-center","gap-1"],["cIcon","","name","cilXCircle","size","sm"],[3,"ngModelChange","valueChange","ngModel","disabled"],[3,"value","selected",4,"ngFor","ngForOf"],["size","lg","backdrop","static","keyboard","false",1,"d-flex","align-items-center","justify-content-center",3,"visibleChange","visible"],[1,"text-center"],["color","primary",1,"mb-3"],[1,"flex-container"],["cButton","","color","primary",1,"button-card",3,"click"],["cIcon","","name","cilFilter","size","sm"],[1,"d-inline-block"],["color","success","cButton","",1,"button-card",3,"click"],["cIcon","","name","cilArrowThickBottom","size","sm"],["cButton","","color","success",1,"button-card",3,"click"],["cIcon","","name","cilArrowThickFromBottom","size","sm"],[3,"visibleChange","visible"],[1,"file-input-container"],["type","file",1,"form-control","btn-info",3,"change"],["cButton","","color","success",1,"mt-3",3,"click"],["name","cil-cloud-upload"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"fw-bold"],["cTable","","color","white",3,"striped"],["scope","col",2,"width","20px"],["scope","col",2,"width","300px"],[4,"ngFor","ngForOf"],["align","center",3,"activePageChange","activePage","pages"],[3,"value","selected"],[2,"text-align","center","vertical-align","middle"],[1,"d-flex","align-items-center","justify-content-center","gap-2","tooltip-container"],[1,"tooltip-container"],["width","200","height","250",1,"rounded","shadow-sm","tooltip-trigger",2,"cursor","pointer",3,"click","error","src"],[1,"custom-tooltip"],["backdrop","static",3,"visibleChange","visible"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"d-flex","justify-content-between"],[1,"mb-3","text-start"],[1,"d-flex","justify-content-center","gap-3"],[1,"text-center","d-flex","flex-column","align-items-center"],[1,"img-thumbnail","mt-2",2,"width","300px","height","350px","object-fit","cover","cursor","pointer",3,"src"],[1,"mt-3","text-start"],["type","file","accept",".jpg, .png",1,"form-control","mb-2","mt-3",3,"change"],[4,"ngIf"],["cButton","","color","secondary",3,"click"],["cButton","","color","success",3,"click"],[4,"ngIf","ngIfElse"],[1,"mt-2"],[1,"img-thumbnail",2,"width","200px","height","200px","object-fit","cover",3,"src"],[1,"loading-text"],["width","200","height","250",1,"rounded","shadow-sm","tooltip-trigger",2,"cursor","pointer",3,"click","load","error","src"]],template:function(o,e){if(o&1){let l=b();i(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"label",7),r(5,"Employee Code"),n(),i(6,"div",8)(7,"input",9),I("ngModelChange",function(d){return a(l),v(e.employee_code,d)||(e.employee_code=d),s(d)}),n(),i(8,"button",10),g("click",function(){return a(l),s(e.resetInput())}),i(9,"span",11),x(),h(10,"svg",12),r(11," Reset "),n()()()(),P(),i(12,"div",6)(13,"label",7),r(14,"Project ID"),n(),i(15,"c-multi-select",13),I("ngModelChange",function(d){return a(l),v(e.selectedProject,d)||(e.selectedProject=d),s(d)}),g("valueChange",function(){return a(l),s(e.selectProjectId())}),C(16,Ae,2,3,"c-multi-select-option",14),n()()()()(),i(17,"c-modal",15),I("visibleChange",function(d){return a(l),v(e.isLoading,d)||(e.isLoading=d),s(d)}),i(18,"c-modal-body",16),h(19,"c-spinner",17),i(20,"p"),r(21,"Loading, please wait..."),n()()(),i(22,"div",3)(23,"div",4)(24,"div",18)(25,"button",19),g("click",function(){return a(l),s(e.filterEmployee())}),x(),h(26,"svg",20),r(27," Filter "),n(),P(),i(28,"div",21)(29,"button",22),g("click",function(){return a(l),s(e.exportEmployeesPPT())}),x(),h(30,"svg",23),r(31," Export Employees "),n()(),P(),i(32,"button",24),g("click",function(){return a(l),s(e.showImportTemplate())}),x(),h(33,"svg",25),r(34," Import Employees "),n()()(),P(),i(35,"c-modal",26),I("visibleChange",function(d){return a(l),v(e.showImportDialog,d)||(e.showImportDialog=d),s(d)}),i(36,"c-modal-header"),r(37," Import File EmployeePPT "),n(),i(38,"c-modal-body")(39,"div",27)(40,"input",28,0),g("change",function(d){return a(l),s(e.onChange(d))}),n()()(),i(42,"c-modal-footer")(43,"button",29),g("click",function(){return a(l),s(e.importFileEmployeePPT())}),h(44,"c-icon",30),r(45," Import File "),n()()()(),i(46,"div",3)(47,"div",4)(48,"div",31)(49,"span",32),r(50),n()(),i(51,"table",33)(52,"thead")(53,"tr")(54,"th",34),r(55,"#"),n(),i(56,"th",35),r(57,"Employee"),n(),i(58,"th",35),r(59,"Image"),n(),i(60,"th",35),r(61,"Image Face 2"),n()()(),i(62,"tbody"),C(63,We,86,16,"tr",36),n()(),i(64,"c-smart-pagination",37),g("activePageChange",function(d){return a(l),s(e.onPageChange(d))}),n()()()}o&2&&(m(7),w("ngModel",e.employee_code),m(8),w("ngModel",e.selectedProject),u("disabled",!0),m(),u("ngForOf",e.projectIds),m(),w("visible",e.isLoading),m(18),w("visible",e.showImportDialog),m(15),f("Total Items: ",e.totalRecords,""),m(),u("striped",!0),m(12),u("ngForOf",e.employeeProfiles),m(),u("activePage",e.currentPage)("pages",e.totalPages))},dependencies:[we,fe,he,ie,N,O,q,ne,J,Q,X,K,ye,Ee,_e,te,ee,$,Z,Y,me,se,ae,ue,ce,ge,pe,de,re,le,oe],styles:['@charset "UTF-8";.button-card[_ngcontent-%COMP%]{margin-right:20px}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:4px;text-align:center}.tooltip-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.custom-tooltip[_ngcontent-%COMP%]{visibility:hidden;background-color:#000;color:#fff;text-align:center;padding:5px 10px;border-radius:5px;position:absolute;bottom:60%;left:50%;transform:translate(-50%);white-space:nowrap;opacity:0;transition:opacity .3s}.tooltip-container[_ngcontent-%COMP%]:hover   .custom-tooltip[_ngcontent-%COMP%]{visibility:visible;opacity:1}.loading-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:14px;font-weight:700;color:gray}']})}}return c})();export{it as EmployeesProfileComponent};
