import{c as M}from"./chunk-Y3NE2SNJ.js";import{a as R}from"./chunk-CWM7VNHW.js";import{a as ze}from"./chunk-26M4WOOW.js";import"./chunk-RJESRZJ5.js";import{Ma as Pe,Na as Ve,Y as Se,da as Me,fb as Oe,ua as Te,va as Fe}from"./chunk-OVEX3KHJ.js";import{a as D}from"./chunk-FYYLBBTR.js";import{Cb as ye,Ga as pe,H as J,I as Z,Jb as Ae,Kb as we,L as $,Lb as Ee,Ma as me,Nb as Ie,O as ee,P as te,Pa as ue,Q as ie,R as ne,U as oe,Va as he,W as S,Wa as ge,X as ae,Z as ce,aa as le,d as Y,fb as fe,hb as Ce,ia as re,ib as xe,kb as ve,ma as se,na as _e,vb as ke,wb as be,ya as de}from"./chunk-55Y7RW7N.js";import{Ac as r,Bc as E,Bd as H,Cb as g,Cc as A,Dc as j,Ed as U,Fc as x,Gc as v,Hc as k,Hd as X,Lc as Q,Nc as N,Rb as s,Tc as V,Vc as O,ba as L,bc as o,cc as a,db as I,dc as f,ec as B,fc as K,ga as W,hc as b,ib as l,kc as C,mc as d,nb as P,ra as u,sa as h,ta as y,ua as F,wb as q,wd as G,xd as z}from"./chunk-XOKJR3V5.js";import{g as Ge}from"./chunk-WWX6BADO.js";var De=Ge(ze());var Re=(()=>{class i{constructor(e){this.httpClient=e,this.rootAPI=D.apiUrl+"DetectAI/",this.attendanceAPI=D.apiUrl+"AttendanceAi/"}GetListAttendanceAI(e,c,t,n=1){return this.httpClient.post(this.rootAPI+"ewo_attendance_ai_getall",{empid:e,att_code:c,work_date:t,status:n})}ewo_ATD_filterAttendance(e,c,t,n,_,p,w,T,Le,We,qe,Be,Ke,je,Qe,Ne){return this.httpClient.post(this.attendanceAPI+"ewo_ATD_filterAttendance",{qc_id:e,project_id:c,att_code:t,shop_code:n,from_date:_,to_date:p,statusQC:w,ci_result:T,co_result:Le,ci_final_result:We,co_final_result:qe,guild_id:Be,rowPerPage:Ke,pageNumber:je,qc_lock:Qe,id_BC:Ne})}ReCheckAttendanceAI(e,c,t,n,_){return this.httpClient.post(this.attendanceAPI+"ewo_ATD_updateEmployees",{project_id:e,ci_result:c,att_code:t,ci_fail_reason:n,ci_final_result:_})}ReCheckCOAttendanceAI(e,c,t,n,_){return this.httpClient.post(this.attendanceAPI+"ewo_ATD_updateEmployeesCO",{project_id:e,att_code:c,co_result:t,co_fail_reason:n,co_final_result:_})}LockAttendanceAI(e,c,t,n){return this.httpClient.post(this.attendanceAPI+"ewo_ATD_lockAttendance",{qc_id:e,project_id:c,att_code:t,work_date:n})}ExportAttendanceAI(e){let c=this.attendanceAPI+"ewo_ATD_exportAttendance",t={responseType:"blob"},n={project_id:e};return this.httpClient.post(c,n,t).subscribe(_=>{this.saveFile(_,".xlsx","atd_result")})}saveFile(e,c=".xlsx",t=""){let n=new Date,_="download_"+t+"_"+n.getFullYear().toString()+(n.getMonth()+1)+n.getDate()+n.toLocaleTimeString().replace(/[ ]|[,]|[:]/g,"").trim()+c;(0,De.saveAs)(e,_)}SwitchAttendanceDetectAI(e,c,t,n,_){return this.httpClient.post(this.attendanceAPI+"ewo_ATD_switchAttendanceDetectAI",{project_id:e,att_code:c,type:t,attribute:n,verify:_})}static{this.\u0275fac=function(c){return new(c||i)(W(Y))}}static{this.\u0275prov=L({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Xe=i=>({color:i});function Ye(i,m){i&1&&(o(0,"div",40),f(1,"i",41),o(2,"span",42),r(3,"\u0110ang load d\u1EEF li\u1EC7u"),a()())}function Je(i,m){i&1&&(o(0,"th"),r(1,"KQ CI"),a())}function Ze(i,m){i&1&&(o(0,"th"),r(1,"KQ CO"),a())}function $e(i,m){i&1&&(y(),f(0,"svg",50))}function et(i,m){if(i&1&&(o(0,"td"),r(1),g(2,$e,1,0,"svg",46),a()),i&2){let e=d().$implicit;l(),A("CI AI: ",e.ci_result," "),l(),s("ngIf",!e.ci_result)}}function tt(i,m){i&1&&(y(),f(0,"svg",50))}function it(i,m){i&1&&(y(),f(0,"svg",50))}function nt(i,m){if(i&1&&(o(0,"td"),r(1),g(2,it,1,0,"svg",46),a()),i&2){let e=d().$implicit;l(),A("CO AI: ",e.co_result," "),l(),s("ngIf",!e.co_result)}}function ot(i,m){i&1&&(y(),f(0,"svg",50))}function at(i,m){i&1&&(y(),f(0,"svg",51))}function ct(i,m){i&1&&(y(),f(0,"svg",52))}function lt(i,m){if(i&1&&f(0,"img",65),i&2){let e=d(2).$implicit;s("src",e.image,I)}}function rt(i,m){i&1&&f(0,"img",66)}function st(i,m){if(i&1&&(o(0,"p"),r(1),V(2,"date"),a()),i&2){let e=d(2).$implicit;l(),E(O(2,1,e.ci_time,"dd/MM/yyyy HH:mm:ss"))}}function _t(i,m){i&1&&(o(0,"p"),r(1,"--/--/---"),a())}function dt(i,m){if(i&1&&f(0,"img",67),i&2){let e=d(2).$implicit;s("src",e.co_photo,I)}}function pt(i,m){i&1&&f(0,"img",66)}function mt(i,m){if(i&1){let e=b();o(0,"div",57)(1,"h4",76),r(2," AI Detect Result "),a(),o(3,"div",77)(4,"label",78)(5,"span"),r(6,"Face ID:"),a(),o(7,"select",79),k("ngModelChange",function(t){u(e);let n=d(3).$implicit;return v(n.ci_FaceVerifyOk,t)||(n.ci_FaceVerifyOk=t),h(t)}),C("change",function(){u(e);let t=d(3).$implicit,n=d(2);return h(n.updateSwitchATDAI_CI(t,"faceId"))}),o(8,"option",80),r(9,"\u0110\xFAng"),a(),o(10,"option",80),r(11,"Sai"),a()()()()()}if(i&2){let e=d(3).$implicit;l(7),x("ngModel",e.ci_FaceVerifyOk),s("disabled",e.qc_lock===1),l(),s("value",1),l(2),s("value",0)}}function ut(i,m){if(i&1){let e=b();o(0,"div")(1,"c-form-check")(2,"input",82),C("change",function(t){let n=u(e).$implicit,_=d(4).index,p=d(2);return h(p.handleCheckboxChange(_,n.label,t,!0))}),a(),o(3,"label",72),r(4),a()()()}if(i&2){let e=m.$implicit,c=d(4),t=c.$implicit,n=c.index,_=d(2);l(2),s("id",t.key+n)("disabled",t.qc_lock===1)("checked",_.isCheckedCI(n,e.label)),l(2),A(" ",e.label," ")}}function ht(i,m){if(i&1&&(o(0,"div",81),g(1,ut,5,4,"div",45),a()),i&2){let e=d(5);l(),s("ngForOf",e.listFailAttendance)}}function gt(i,m){if(i&1){let e=b();o(0,"div",55)(1,"button",83),C("click",function(){u(e);let t=d(3).index,n=d(2);return h(n.updateCheckAttendance(t))}),r(2," C\u1EADp nh\u1EADt "),y(),f(3,"svg",84),a()()}}function ft(i,m){if(i&1){let e=b();o(0,"div"),g(1,mt,12,4,"div",68),o(2,"div",69)(3,"div",70)(4,"c-form-check")(5,"input",71),k("ngModelChange",function(t){u(e);let n=d(2).index,_=d(2);return v(_.ci_final_result[n],t)||(_.ci_final_result[n]=t),h(t)}),a(),o(6,"label",72),r(7,"\u0110\u1EA1t"),a()(),o(8,"c-form-check")(9,"input",73),k("ngModelChange",function(t){u(e);let n=d(2).index,_=d(2);return v(_.ci_final_result[n],t)||(_.ci_final_result[n]=t),h(t)}),a(),o(10,"label",72),r(11,"Kh\xF4ng \u0111\u1EA1t"),a()()(),g(12,ht,2,1,"div",74)(13,gt,4,0,"div",75),a()()}if(i&2){let e=d(2),c=e.$implicit,t=e.index,n=d(2);l(),s("ngIf",n.isIT),l(4),s("name","flexRadioCheck"+t)("disabled",c.qc_lock===1),x("ngModel",n.ci_final_result[t]),l(4),s("name","flexRadioCheck"+t)("disabled",c.qc_lock===1),x("ngModel",n.ci_final_result[t]),l(3),s("ngIf",n.ci_final_result[t]==="fail"),l(),s("ngIf",c.qc_lock!==1)}}function Ct(i,m){if(i&1&&(o(0,"p"),r(1),V(2,"date"),a()),i&2){let e=d(2).$implicit;l(),E(O(2,1,e.co_time,"dd/MM/yyyy HH:mm:ss"))}}function xt(i,m){i&1&&(o(0,"p"),r(1,"--/--/---"),a())}function vt(i,m){if(i&1&&f(0,"img",67),i&2){let e=d(2).$implicit;s("src",e.co_photo,I)}}function kt(i,m){i&1&&f(0,"img",66)}function bt(i,m){if(i&1){let e=b();o(0,"div",57)(1,"h4",76),r(2," AI Detect Result "),a(),o(3,"div",77)(4,"label",78)(5,"span"),r(6,"Face ID:"),a(),o(7,"select",79),k("ngModelChange",function(t){u(e);let n=d(3).$implicit;return v(n.co_FaceVerifyOk,t)||(n.co_FaceVerifyOk=t),h(t)}),C("change",function(){u(e);let t=d(3).$implicit,n=d(2);return h(n.updateSwitchATDAI_CO(t,"faceId"))}),o(8,"option",80),r(9,"\u0110\xFAng"),a(),o(10,"option",80),r(11,"Sai"),a()()()()()}if(i&2){let e=d(3).$implicit;l(7),x("ngModel",e.co_FaceVerifyOk),s("disabled",e.qc_lock===1),l(),s("value",1),l(2),s("value",0)}}function yt(i,m){if(i&1){let e=b();o(0,"div")(1,"c-form-check")(2,"input",82),C("change",function(t){let n=u(e).$implicit,_=d(4).index,p=d(2);return h(p.handleCheckboxChange(_,n.label,t,!1))}),a(),o(3,"label",72),r(4),a()()()}if(i&2){let e=m.$implicit,c=d(4),t=c.$implicit,n=c.index,_=d(2);l(2),s("id",e.key+n)("disabled",t.qc_lock===1)("checked",_.isCheckedCO(n,e.label)),l(2),A(" ",e.label," ")}}function At(i,m){if(i&1&&(o(0,"div",92),g(1,yt,5,4,"div",45),a()),i&2){let e=d(5);l(),s("ngForOf",e.listFailAttendance)}}function wt(i,m){if(i&1){let e=b();o(0,"div")(1,"button",83),C("click",function(){u(e);let t=d(3).index,n=d(2);return h(n.updateCheckAttendanceCO(t))}),r(2," C\u1EADp nh\u1EADt "),y(),f(3,"svg",84),a()()}}function Et(i,m){if(i&1){let e=b();o(0,"div"),g(1,bt,12,4,"div",68),o(2,"div",85)(3,"div",86)(4,"c-form-check")(5,"input",87),k("ngModelChange",function(t){u(e);let n=d(2).index,_=d(2);return v(_.co_final_result[n],t)||(_.co_final_result[n]=t),h(t)}),a(),o(6,"label",88),r(7,"\u0110\u1EA1t"),a()(),o(8,"c-form-check")(9,"input",89),k("ngModelChange",function(t){u(e);let n=d(2).index,_=d(2);return v(_.co_final_result[n],t)||(_.co_final_result[n]=t),h(t)}),a(),o(10,"label",90),r(11,"Kh\xF4ng \u0111\u1EA1t"),a()()(),g(12,At,2,1,"div",91)(13,wt,4,0,"div",44),a()()}if(i&2){let e=d(2),c=e.$implicit,t=e.index,n=d(2);l(),s("ngIf",n.isIT),l(4),s("name",n.flexRadioCheck_CO+t)("disabled",c.qc_lock===1),x("ngModel",n.co_final_result[t]),l(4),s("name",n.flexRadioCheck_CO+t)("disabled",c.qc_lock===1),x("ngModel",n.co_final_result[t]),l(3),s("ngIf",n.co_final_result[t]==="fail"),l(),s("ngIf",c.qc_lock!==1)}}function It(i,m){if(i&1&&(o(0,"tr")(1,"td",53)(2,"div",54)(3,"c-card")(4,"c-card-body",55)(5,"div",56)(6,"div",57)(7,"label",58),r(8,"H\xECnh Profile"),a(),o(9,"p"),r(10,"-------"),a(),g(11,lt,1,1,"img",59)(12,rt,1,0,"img",60),a(),o(13,"div",61)(14,"label",62),r(15,"Check-in"),a(),g(16,st,3,4,"p",44)(17,_t,2,0,"p",44)(18,dt,1,1,"img",63)(19,pt,1,0,"img",60)(20,ft,14,9,"div",44),a()()()(),o(21,"c-card")(22,"c-card-body",55)(23,"div",61)(24,"label",64),r(25,"Check-out"),a(),g(26,Ct,3,4,"p",44)(27,xt,2,0,"p",44)(28,vt,1,1,"img",63)(29,kt,1,0,"img",60)(30,Et,14,9,"div",44),a()()()()()()),i&2){let e=d().$implicit;l(11),s("ngIf",e.image),l(),s("ngIf",!e.image),l(4),s("ngIf",e.ci_time),l(),s("ngIf",!e.ci_time),l(),s("ngIf",e.ci_photo),l(),s("ngIf",!e.ci_photo),l(),s("ngIf",e.ci_photo),l(6),s("ngIf",e.co_time),l(),s("ngIf",!e.co_time),l(),s("ngIf",e.co_photo),l(),s("ngIf",!e.co_photo),l(),s("ngIf",e.co_photo)}}function St(i,m){if(i&1){let e=b();B(0),o(1,"tr")(2,"td")(3,"button",27),C("click",function(){let t=u(e).index,n=d(2);return h(n.toggleRow(t))}),r(4),a()(),o(5,"td"),r(6),a(),g(7,et,3,2,"td",44),o(8,"td"),r(9),g(10,tt,1,0,"svg",46),a(),o(11,"td"),r(12),a(),g(13,nt,3,2,"td",44),o(14,"td"),r(15),g(16,ot,1,0,"svg",46),a(),o(17,"td"),r(18),a(),o(19,"td")(20,"div",47),C("click",function(){let t=u(e).$implicit,n=d(2);return h(n.openConfirmModal(t))}),g(21,at,1,0,"svg",48)(22,ct,1,0,"svg",49),r(23),a()()(),g(24,It,31,12,"tr",44),f(25,"tr"),K()}if(i&2){let e=m.$implicit,c=m.index,t=d(2);l(4),A(" ",t.expandedRows[c]?"-":"+"," "),l(2),j("",e.att_code," - ",e.emp_name,""),l(),s("ngIf",t.isIT),l(2),A("CI QC: ",e.ci_final_result," "),l(),s("ngIf",!e.ci_final_result),l(2),E(e.ci_fail_reason||"Kh\xF4ng c\xF3"),l(),s("ngIf",t.isIT),l(2),A("CO QC: ",e.co_final_result," "),l(),s("ngIf",!e.co_final_result),l(2),E(e.co_fail_reason||"Kh\xF4ng c\xF3"),l(2),s("ngStyle",N(16,Xe,e.qc_lock===1?"red":"black")),l(),s("ngIf",e.qc_lock===1),l(),s("ngIf",e.qc_lock===0||e.qc_lock==null),l(),A(" ",e.qc_lock===1?"\u0110\xE3 kho\xE1":"Kho\xE1"," "),l(),s("ngIf",t.expandedRows[c])}}function Mt(i,m){if(i&1&&(o(0,"table",43)(1,"thead")(2,"tr")(3,"th"),r(4,"#"),a(),o(5,"th"),r(6,"Employee"),a(),g(7,Je,2,0,"th",44),o(8,"th"),r(9,"KQ CI QC"),a(),o(10,"th"),r(11,"L\xFD Do CI Fail"),a(),g(12,Ze,2,0,"th",44),o(13,"th"),r(14,"KQ CO QC"),a(),o(15,"th"),r(16,"L\xFD do CO Fail"),a(),f(17,"th"),a()(),o(18,"tbody"),g(19,St,26,18,"ng-container",45),a()()),i&2){let e=d();l(7),s("ngIf",e.isIT),l(5),s("ngIf",e.isIT),l(7),s("ngForOf",e.listAttendance)}}function Tt(i,m){if(i&1){let e=b();o(0,"c-smart-pagination",93),C("activePageChange",function(t){u(e);let n=d();return h(n.onPageChange(t))}),a()}if(i&2){let e=d();s("activePage",1)("pages",e.pagination)}}var oi=(()=>{class i{constructor(e,c){this._service=e,this.iconSet=c,this.user_id=0,this.isIT=!1,this.formatDate=t=>{let n=String(t.getDate()).padStart(2,"0"),_=String(t.getMonth()+1).padStart(2,"0"),p=t.getFullYear();return`${n}/${_}/${p}`},this.columns=[{key:"empid",label:"Employee"},{key:"ci_result",label:"K\u1EBFt qu\u1EA3 checkin"},{key:"ci_final_result",label:"K\u1EBFt qu\u1EA3 checkin cu\u1ED1i c\xF9ng"},{key:"ci_fail_reason",label:"L\xFD do checkin th\u1EA5t b\u1EA1i"},{key:"co_final_result",label:"K\u1EBFt qu\u1EA3 checkout cu\u1ED1i c\xF9ng"},{key:"co_fail_reason",label:"L\xFD do checkout th\u1EA5t b\u1EA1i"}],this.listFailAttendance=[{key:"mask",label:"\u0110eo kh\u1EA9u trang"},{key:"noFace",label:"Kh\xF4ng hi\u1EC7n di\u1EC7n khu\xF4n m\u1EB7t trong \u1EA3nh"},{key:"notFullFace",label:"Kh\xF4ng ch\u1EE5p full m\u1EB7t"},{key:"otherDevice",label:"Ch\u1EE5p qua thi\u1EBFt b\u1ECB kh\xE1c"},{key:"sharedImage",label:"D\xF9ng chung h\xECnh"},{key:"notMatchProfile",label:"Kh\xF4ng gi\u1ED1ng h\xECnh profile"}],this.pageNumber=1,this.rowPerPageEmp=20,this.employee_code="",this.attendanceStatus={},this.selectedLabelsFail={},this.selectedCheckFailCI={},this.selectedCheckFailCO={},this.project_id=55,this.ci_result="",this.ci_final_result={},this.ci_fail_reason="",this.att_code="",this.co_result="",this.co_final_result={},this.co_fail_reason="",this.expandedRows={},this.reasonCheckInFail={},this.reasonCheckOutFail={},this.rowPerPage=20,this.totalRow=0,this.pagination=1,this.shop_code="",this.isLoading=!1,this.status=0,this.ci_final_result_filter="",this.co_final_result_filter="",this.kqqc="",this.qc_lock=-1,this.guild_id="",this.id_BC="",this.confirmLockVisible=!1,this.selectedItemLock=null,this.currentPage=1,this.visible_toast=!1,this.message_toast="",c.icons={cilLockLocked:Te,cilLockUnlocked:Fe,cilFace:Me,cilSave:Pe,cilSearch:Ve,cilDataTransferDown:Se,cilWindowMinimize:Oe}}ngOnInit(){this.fromDate=new Date,this.toDate=new Date,this.user_id=M.loadUser().employee_id,this.isIT=M.loadUser().employee_type_id==1}handleCheckboxChange(e,c,t,n){let _=t.target.checked;this.selectedCheckFailCI[e]||(this.selectedCheckFailCI[e]=[]),this.selectedCheckFailCO[e]||(this.selectedCheckFailCO[e]=[]),this.reasonCheckInFail[e]||(this.reasonCheckInFail[e]=[]),this.reasonCheckOutFail[e]||(this.reasonCheckOutFail[e]=[]);let p=n?this.selectedCheckFailCI:this.selectedCheckFailCO,w=n?this.reasonCheckInFail:this.reasonCheckOutFail;_?p[e].includes(c)||(w[e].push(c),p[e]=[...w[e]]):(w[e]=w[e].filter(T=>T!==c),p[e]=[...w[e]])}updateCheckAttendance(e){this.ci_fail_reason="",this.ci_final_result[e]=="fail"&&(this.ci_fail_reason=this.selectedCheckFailCI[e].join(", ")),this.att_code=this.listAttendance[e].att_code,this._service.ReCheckAttendanceAI(M.ProjectID(),this.ci_result,this.att_code,this.ci_fail_reason,this.ci_final_result[e]).subscribe(c=>{c.result==="OK"?(this.att_code="",this.visible_toast=!0,this.message_toast="C\u1EADp nh\u1EADt th\xE0nh c\xF4ng",this.listAttendance[e].ci_final_result=this.ci_final_result[e],this.listAttendance[e].ci_fail_reason=this.ci_fail_reason,setTimeout(()=>{this.visible_toast=!1},2e3)):this.message_toast="C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i"})}updateCheckAttendanceCO(e){this.co_fail_reason="",this.co_final_result[e]==="fail"&&(this.co_fail_reason=this.selectedCheckFailCO[e].join(", ")),this.att_code=this.listAttendance[e].att_code,this._service.ReCheckCOAttendanceAI(this.project_id,this.att_code,this.co_result,this.co_fail_reason,this.co_final_result[e]).subscribe(c=>{c.result=="OK"?(this.att_code="",this.listAttendance[e].co_final_result=this.co_final_result[e],this.listAttendance[e].co_fail_reason=this.ci_fail_reason,this.visible_toast=!0,this.message_toast="C\u1EADp nh\u1EADt th\xE0nh c\xF4ng",setTimeout(()=>{this.visible_toast=!1},2e3)):this.message_toast="C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i"})}toggleRow(e){this.expandedRows[e]=!this.expandedRows[e],this.listAttendance[e]&&(this.reasonCheckInFail[e]=this.listAttendance[e].ci_fail_reason?this.listAttendance[e].ci_fail_reason.split(",").map(c=>c.trim()):[],this.reasonCheckOutFail[e]=this.listAttendance[e].co_fail_reason?this.listAttendance[e].co_fail_reason.split(",").map(c=>c.trim()):[]),this.ci_final_result[e]=this.listAttendance[e]?.ci_final_result||"",this.co_final_result[e]=this.listAttendance[e]?.co_final_result||""}resetKQQC(){this.ci_result="",this.co_result="",this.ci_final_result_filter="",this.co_final_result_filter=""}filter(e){if(this.resetKQQC(),this.kqqc){let[c,t]=this.kqqc.split("-");switch(c){case"ci_result":this.ci_result=t;break;case"co_result":this.co_result=t;break;case"ci_final_result":this.ci_final_result_filter=t;break;case"co_final_result":this.co_final_result_filter=t;break}}this.pageNumber=e,this.isLoading=!0,this._service.ewo_ATD_filterAttendance(this.user_id,this.project_id,this.att_code,this.shop_code,R.DateToInt(this.fromDate),R.DateToInt(this.toDate),this.status=0,this.ci_result,this.co_result,this.ci_final_result_filter,this.co_final_result_filter,this.guild_id,this.rowPerPage,this.pageNumber,this.qc_lock,this.id_BC).subscribe(c=>{if(c.result=="OK"){let t=c.data;this.listAttendance=t,this.isLoading=!1,this.totalRow=this.listAttendance[0]?.TotalRows|0,this.pagination=Math.ceil(this.totalRow/this.rowPerPage)}})}export(){this._service.ExportAttendanceAI(this.project_id)}lockAtdItem(e){this.confirmLockVisible=!1,e.qc_lock!==1&&this._service.LockAttendanceAI(this.user_id,this.project_id,e.att_code,e.work_date).subscribe(c=>{c.result=="OK"&&this.filter(this.currentPage)})}openConfirmModal(e){this.selectedItemLock=e,this.confirmLockVisible=!0}confirmAction(){this.lockAtdItem(this.selectedItemLock)}onPageChange(e){this.currentPage=e,this.filter(e)}isCheckedCI(e,c){return this.reasonCheckInFail[e]?.includes(c)??!1}isCheckedCO(e,c){return this.reasonCheckOutFail[e]?.includes(c)??!1}updateSwitchATDAI_CI(e,c){let t="checkin",n=0;switch(c){case"faceId":n=e.ci_FaceVerifyOk;break;case"logo":n=e.ci_brandOk;break;case"location":n=e.ci_LocationOk;break}this._service.SwitchAttendanceDetectAI(this.project_id,e.att_code,t,c,n).subscribe(_=>{_.result==="OK"?(this.visible_toast=!0,this.message_toast="C\u1EADp nh\u1EADt th\xE0nh c\xF4ng",setTimeout(()=>{this.visible_toast=!1},2e3)):this.message_toast="C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i"})}updateSwitchATDAI_CO(e,c){let t="checkout",n=0;switch(c){case"faceId":n=e.co_FaceVerifyOk;break;case"logo":n=e.co_brandOk;break;case"location":n=e.co_LocationOk;break}this._service.SwitchAttendanceDetectAI(this.project_id,e.att_code,t,c,n).subscribe(_=>{_.result==="OK"?(this.visible_toast=!0,this.message_toast="C\u1EADp nh\u1EADt th\xE0nh c\xF4ng",setTimeout(()=>{this.visible_toast=!1},2e3)):this.message_toast="C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i"})}static{this.\u0275fac=function(c){return new(c||i)(P(Re),P(S))}}static{this.\u0275cmp=q({type:i,selectors:[["app-attendance-result"]],features:[Q([S])],decls:97,vars:17,consts:[["datePicker","cDatePicker"],[1,"mt-1","mb-1"],[1,"p-2"],["md","3"],[1,"clearfix"],[1,"pt-3"],["inputReadOnly","",3,"ngModelChange","ngModel","inputDateFormat"],[1,"input-prepend"],["cFormControl","","placeholder","Nh\u1EADp m\xE3 nh\xE2n vi\xEAn","type","text",3,"ngModelChange","ngModel"],["cFormControl","","placeholder","Nh\u1EADp m\xE3 c\u1EEDa h\xE0ng","type","text",3,"ngModelChange","ngModel"],["cFormControl","","placeholder","Nh\u1EADp m\xE3 b\xE1o c\xE1o","type","text",3,"ngModelChange","ngModel"],[2,"display","flex","gap","10px"],["cSelect","",2,"width","100%","padding","6px 12px","border","1px solid #dbdfe6",3,"ngModelChange","ngModel"],["value",""],["value","ci_result-pass"],["value","ci_result-fail"],["value","co_result-pass"],["value","co_result-fail"],["value","ci_final_result-pass"],["value","ci_final_result-fail"],["value","co_final_result-pass"],["value","co_final_result-fail"],[1,""],["value","-1"],["value","0"],["value","1"],[2,"display","flex","gap","5px"],["cButton","","color","primary",3,"click"],["cIcon","","name","cilSearch"],["cIcon","","name","cilDataTransferDown"],["class","fade show","style","text-align: center; height: 20vh ; padding-top:calc(20vh / 2); background-color: white;",4,"ngIf"],[2,"position","fixed","top","80px","right","0","background-color","cornflowerblue","color","white","z-index","1000",3,"autohide","delay","visible"],[1,"mr-auto"],["class","table",4,"ngIf"],[3,"visibleChange","visible"],[1,"modal-title"],[1,"btn-close",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],["align","center",3,"activePage","pages","activePageChange",4,"ngIf"],[1,"fade","show",2,"text-align","center","height","20vh","padding-top","calc(20vh / 2)","background-color","white"],[1,"spinner-grow","spinner-grow-sm","text-success"],[1,"m-1","text-success"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["cIcon","","name","cilWindowMinimize",4,"ngIf"],[2,"cursor","pointer",3,"click","ngStyle"],["cIcon","","name","cilLockLocked",4,"ngIf"],["cIcon","","name","cilLockUnlocked",4,"ngIf"],["cIcon","","name","cilWindowMinimize"],["cIcon","","name","cilLockLocked"],["cIcon","","name","cilLockUnlocked"],["colspan","9"],[2,"display","flex","gap","20px"],[2,"text-align","center"],[2,"display","flex","gap","50px"],[2,"padding","15px"],["for","",2,"width","100%","font-weight","bold"],["alt","img","width","250","height","250",3,"src",4,"ngIf"],["src","../../../../assets/images/avatars/default-avatar.jpg","alt","","width","250","height","250",4,"ngIf"],[1,"checkin-container"],["for","",2,"width","100%"],["alt","img-check-out","width","250","height","250",3,"src",4,"ngIf"],["for",""],["alt","img","width","250","height","250",3,"src"],["src","../../../../assets/images/avatars/default-avatar.jpg","alt","","width","250","height","250"],["alt","img-check-out","width","250","height","250",3,"src"],["style","padding: 15px;",4,"ngIf"],[1,"form-container","my-3"],[1,"radio-group",2,"display","flex","gap","15px","justify-content","center"],["cFormCheckInput","","type","radio","value","pass",3,"ngModelChange","name","disabled","ngModel"],["cFormCheckLabel",""],["cFormCheckInput","","type","radio","value","fail",3,"ngModelChange","name","disabled","ngModel"],["class","fail-options","style","display: flex; flex-direction: column; align-items: baseline;",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[2,"margin","0 0 10px","text-align","center","font-size","16px","font-weight","bold","color","#333"],[2,"display","flex","flex-direction","column","gap","10px"],[2,"display","flex","justify-content","space-between","align-items","center"],["cSelect","",2,"padding","5px","border-radius","5px","border","1px solid #ccc",3,"ngModelChange","change","ngModel","disabled"],[3,"value"],[1,"fail-options",2,"display","flex","flex-direction","column","align-items","baseline"],["cFormCheckInput","","type","checkbox",3,"change","id","disabled","checked"],["cButton","","color","warning",2,"margin","10px 0",3,"click"],["cIcon","","name","cilSave"],[1,"my-3"],[1,"radio-group"],["cFormCheckInput","","type","radio","value","pass","id","pass_co",3,"ngModelChange","name","disabled","ngModel"],["cFormCheckLabel","","for","pass"],["cFormCheckInput","","type","radio","value","fail","id","fail_co",3,"ngModelChange","name","disabled","ngModel"],["cFormCheckLabel","","for","fail"],["class","fail-options",4,"ngIf"],[1,"fail-options"],["align","center",3,"activePageChange","activePage","pages"]],template:function(c,t){if(c&1){let n=b();o(0,"c-card",1)(1,"c-row",2)(2,"c-col",3)(3,"span",4)(4,"h6",5),r(5,"T\u1EEB ng\xE0y"),a()(),o(6,"c-date-picker",6,0),k("ngModelChange",function(p){return u(n),v(t.fromDate,p)||(t.fromDate=p),h(p)}),a()(),o(8,"c-col",3)(9,"span",4)(10,"h6",5),r(11,"\u0110\u1EBFn ng\xE0y"),a()(),o(12,"c-date-picker",6,0),k("ngModelChange",function(p){return u(n),v(t.toDate,p)||(t.toDate=p),h(p)}),a()(),o(14,"c-col",3)(15,"span",4)(16,"h6",5),r(17,"Nh\xE2n Vi\xEAn"),a()(),o(18,"c-input-group",7)(19,"input",8),k("ngModelChange",function(p){return u(n),v(t.att_code,p)||(t.att_code=p),h(p)}),a()()(),o(20,"c-col",3)(21,"span",4)(22,"h6",5),r(23,"C\u1EEDa h\xE0ng"),a()(),o(24,"c-input-group",7)(25,"input",9),k("ngModelChange",function(p){return u(n),v(t.shop_code,p)||(t.shop_code=p),h(p)}),a()()(),o(26,"c-col",3)(27,"span",4)(28,"h6",5),r(29,"M\xE3 b\xE1o c\xE1o"),a()(),o(30,"c-input-group",7)(31,"input",10),k("ngModelChange",function(p){return u(n),v(t.id_BC,p)||(t.id_BC=p),h(p)}),a()()(),o(32,"c-col",3)(33,"span",4)(34,"h6",5),r(35,"K\u1EBFt qu\u1EA3"),a()(),o(36,"div",11)(37,"select",12),k("ngModelChange",function(p){return u(n),v(t.kqqc,p)||(t.kqqc=p),h(p)}),o(38,"option",13),r(39,"T\u1EA5t c\u1EA3"),a(),o(40,"option",14),r(41,"AI Check-in - Pass"),a(),o(42,"option",15),r(43,"AI Check-in - Fail"),a(),o(44,"option",16),r(45,"AI Check-out - Pass"),a(),o(46,"option",17),r(47,"AI Check-out - Fail"),a(),o(48,"option",18),r(49,"QC Check-in - Pass"),a(),o(50,"option",19),r(51,"QC Check-in - Fail"),a(),o(52,"option",20),r(53,"QC Check-out - Pass"),a(),o(54,"option",21),r(55,"QC Check-out - Fail"),a()()()(),o(56,"c-col",3)(57,"span",4)(58,"h6",5),r(59,"Kho\xE1"),a()(),o(60,"div",22)(61,"select",12),k("ngModelChange",function(p){return u(n),v(t.qc_lock,p)||(t.qc_lock=p),h(p)}),o(62,"option",23),r(63,"T\u1EA5t c\u1EA3"),a(),o(64,"option",24),r(65,"Ch\u01B0a kho\xE1"),a(),o(66,"option",25),r(67,"\u0110\xE3 kho\xE1"),a()()()(),o(68,"c-row",2)(69,"div",26)(70,"button",27),C("click",function(){return u(n),h(t.filter(1))}),y(),f(71,"svg",28),r(72," T\xECm ki\u1EBFm"),a(),F(),o(73,"button",27),C("click",function(){return u(n),h(t.export())}),y(),f(74,"svg",29),r(75," Export"),a()()()()(),g(76,Ye,4,0,"div",30),F(),o(77,"c-toast",31)(78,"c-toast-header")(79,"strong",32),r(80,"Th\xF4ng b\xE1o"),a()(),o(81,"c-toast-body"),r(82),a()(),g(83,Mt,20,3,"table",33),o(84,"c-modal",34),k("visibleChange",function(p){return u(n),v(t.confirmLockVisible,p)||(t.confirmLockVisible=p),h(p)}),o(85,"c-modal-header")(86,"h5",35),r(87,"X\xE1c nh\u1EADn kho\xE1"),a(),o(88,"button",36),C("click",function(){return u(n),h(t.confirmLockVisible=!1)}),a()(),o(89,"c-modal-body"),r(90," B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n kho\xE1 k\u1EBFt qu\u1EA3 n\xE0y kh\xF4ng? "),a(),o(91,"c-modal-footer")(92,"button",37),C("click",function(){return u(n),h(t.confirmLockVisible=!1)}),r(93,"H\u1EE7y"),a(),o(94,"button",38),C("click",function(){return u(n),h(t.confirmAction())}),r(95,"X\xE1c nh\u1EADn"),a()()(),g(96,Tt,1,2,"c-smart-pagination",39)}c&2&&(l(6),x("ngModel",t.fromDate),s("inputDateFormat",t.formatDate),l(6),x("ngModel",t.toDate),s("inputDateFormat",t.formatDate),l(7),x("ngModel",t.att_code),l(6),x("ngModel",t.shop_code),l(6),x("ngModel",t.id_BC),l(6),x("ngModel",t.kqqc),l(24),x("ngModel",t.qc_lock),l(15),s("ngIf",t.isLoading),l(),s("autohide",!0)("delay",2e3)("visible",t.visible_toast),l(5),A(" ",t.message_toast," "),l(),s("ngIf",t.listAttendance&&!t.isLoading),l(),x("visible",t.confirmLockVisible),l(12),s("ngIf",t.listAttendance))},dependencies:[ce,ae,oe,ie,ne,J,te,ee,Z,$,ge,he,pe,me,le,_e,se,ue,be,ke,ye,re,X,G,z,H,U,de,ve,xe,fe,Ce,Ie,we,Ae,Ee],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ccc}th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:500}.section-title[_ngcontent-%COMP%]{background-color:#ddd;font-size:16px;font-weight:700}th[_ngcontent-%COMP%]:nth-child(3), th[_ngcontent-%COMP%]:nth-child(4), th[_ngcontent-%COMP%]:nth-child(6), th[_ngcontent-%COMP%]:nth-child(7){min-width:150px}.checkin-container[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:8px;box-shadow:0 4px 10px #0000001a;max-width:450px;text-align:center}.checkin-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333;display:block;margin-bottom:5px}.checkin-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#555;font-weight:500}.checkin-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px;border:2px solid #ddd;transition:.3s}.checkin-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{border-color:#007bff;transform:scale(1.05)}.checkin-container[_ngcontent-%COMP%]   .ai-detect[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#00d4ff);color:#fff;padding:10px;border-radius:8px;margin-top:15px}.checkin-container[_ngcontent-%COMP%]   .ai-detect[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;text-transform:uppercase}.checkin-container[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}.checkin-container[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   c-form-check[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.checkin-container[_ngcontent-%COMP%]   .fail-options[_ngcontent-%COMP%]{text-align:left;margin-left:15px;padding-top:10px}.checkin-container[_ngcontent-%COMP%]   .fail-options[_ngcontent-%COMP%]   c-form-check[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.checkin-container[_ngcontent-%COMP%]   .update-button[_ngcontent-%COMP%]{margin-top:15px}.checkin-container[_ngcontent-%COMP%]   .update-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 18px;font-size:14px;border-radius:5px;cursor:pointer;font-weight:700;transition:.3s;background-color:#28a745;color:#fff;border:none}.checkin-container[_ngcontent-%COMP%]   .update-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838;transform:scale(1.05)}"]})}}return i})();export{oi as AttendanceResultComponent};
