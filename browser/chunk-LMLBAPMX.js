import{b as $e,c as et}from"./chunk-EJMYRJUN.js";import{c as F}from"./chunk-Y3NE2SNJ.js";import{a as P}from"./chunk-CWM7VNHW.js";import{a as Ze}from"./chunk-26M4WOOW.js";import{a as U}from"./chunk-RJESRZJ5.js";import{Fa as Ne,Ma as Ge,N as qe,Na as ze,Oa as Xe,Pa as Ye,Y as We,da as Ue,fb as Je,pa as je,ua as Ke,va as He,z as Be}from"./chunk-OVEX3KHJ.js";import{a as j}from"./chunk-FYYLBBTR.js";import{Cb as De,Ga as Ee,H as oe,I as ae,Jb as Le,Kb as Re,L as le,Lb as Qe,Ma as ye,N as re,Nb as Oe,O as ce,P as se,Pa as ve,Q as de,R as pe,S as me,T as _e,U as ue,Va as Ae,W as ge,Wa as Ie,X as he,Z as fe,aa as Ce,d as ne,fb as Se,hb as Te,ia as xe,ib as Ve,kb as Me,ma as ke,na as be,vb as Fe,wb as Pe,ya as we}from"./chunk-55Y7RW7N.js";import{Ac as r,Bc as I,Bd as ee,Cb as w,Cc as y,Dc as X,Ed as te,Fc as C,Gc as x,Hc as k,Hd as ie,Mc as Y,Nc as J,Rb as u,Tc as V,Vb as z,Vc as M,ba as H,bc as o,cc as a,db as D,dc as f,ec as q,fc as W,ga as N,hc as E,ib as s,kc as g,mc as _,nb as B,ra as p,sa as m,ta as b,ua as S,wb as G,wd as Z,xd as $}from"./chunk-XOKJR3V5.js";import{g as K}from"./chunk-WWX6BADO.js";var nt=K(Ze());var tt=K(Ze());var it=(()=>{class d{constructor(e){this.httpClient=e,this.rootAPI=j.apiUrl+"DetectAI/",this.attendanceCiCoAPI=j.apiUrl+"AttendanceAiCiCo/"}GetListAttendanceAI(e,i,t,n=1){return this.httpClient.post(this.rootAPI+"ewo_attendance_ai_getall",{empid:e,att_code:i,work_date:t,status:n})}FilterAttendanceAI(e,i,t,n,l,c,v,A,T,L,R,Q,O){return this.httpClient.post(this.attendanceCiCoAPI+"ewo_ATD_filterAttendance",{qc_id:e,project_id:i,att_code:t,shop_code:n,from_date:l,to_date:c,statusAI:v,statusQC:A,rowPerPage:T,pageNumber:L,qc_lock:R,type:Q,id_BC:O})}ReCheckAttendanceAI(e,i,t,n,l,c,v,A){return this.httpClient.post(this.attendanceCiCoAPI+"ewo_ATD_updateEmployees",{user_id:e,project_id:i,att_code:t,fail_reason:n,final_result:l,type:c,time:v,work_date:A})}LockAttendanceAI(e,i,t,n,l,c,v){return this.httpClient.post(this.attendanceCiCoAPI+"ewo_ATD_lockAttendance",{user_id:e,project_id:i,att_code:t,work_date:n,type:l,time:c,id_BC:v})}ExportAttendanceAI(e,i,t,n,l,c,v,A,T,L,R){let Q=this.attendanceCiCoAPI+"ewo_ATD_exportAttendance",O={responseType:"blob"},ot={project_id:e,qc_id:i,from_date:t,to_date:n,type:l,att_code:c,shop_code:v,statusAI:A,statusQC:T,qc_lock:L,id_BC:R};return this.httpClient.post(Q,ot,O)}ATD_ImportEmpUnLock(e){let i=this.attendanceCiCoAPI+"ATD_ImportEmpUnLock",t={responseType:"blob"};return this.httpClient.post(i,e,t)}ATD_ImportEmpLock(e){let i=this.attendanceCiCoAPI+"ATD_ImportEmpLock",t={responseType:"blob"};return this.httpClient.post(i,e,t)}DetectAI_getTemplateCiCo(e,i){let t=this.attendanceCiCoAPI+"DetectAI_getTemplateCiCo",n={responseType:"blob"},l={project_id:e,user_id:i};return this.httpClient.post(t,l,n).subscribe(c=>{this.saveFile(c,".xlsx","template")})}saveFile(e,i=".xlsx",t=""){let n=new Date,l="download_"+t+"_"+n.getFullYear().toString()+(n.getMonth()+1)+n.getDate()+n.toLocaleTimeString().replace(/[ ]|[,]|[:]/g,"").trim()+i;(0,tt.saveAs)(e,l)}SwitchAttendanceDetectAI(e,i,t,n,l,c,v,A){return this.httpClient.post(this.attendanceCiCoAPI+"ewo_ATD_switchAttendanceDetectAI",{user_id:e,project_id:i,att_code:t,type:n,attribute:l,verify:c,work_date:v,time:A})}ATD_ImportCiCo(e,i,t){return e.append("project_id",t.toString()),e.append("user_id",i.toString()),this.httpClient.post(this.attendanceCiCoAPI+"ATD_ImportCiCo",e)}detectAi_commentNoteCiCo(e,i,t,n,l,c,v,A,T){return this.httpClient.post(this.attendanceCiCoAPI+"detectAi_commentNoteCiCo",{type:e,att_code:i,time:t,work_date:n,project_id:l,qc_id:c,user_id:v,comment:A,id_BC:T})}detectAi_updateImgProfileCiCo(e,i,t,n,l,c){return this.httpClient.post(this.attendanceCiCoAPI+"detectAi_updateImgProfileCiCo",{user_id:e,project_id:i,photo_link:t,att_code:n,employee_name:l,id_BC:c})}recheck_ResultAICiCo(e,i,t,n,l,c){return this.httpClient.post(this.attendanceCiCoAPI+"recheck_ResultAICiCo",{img1:e,img2:i,user_id:n,project_id:t,id_BC:l,type:c})}ewo_ATD_uploadImgProfile(e,i,t,n,l){return l.append("user_id",e.toString()),l.append("project_id",i.toString()),l.append("id_BC",t.toString()),l.append("emp_code",n.toString()),this.httpClient.post(this.attendanceCiCoAPI+"ewo_ATD_uploadImgProfile",l)}getTemplateLock_CiCo(e,i){let t=this.attendanceCiCoAPI+"getTemplateLock_CiCo",n={responseType:"blob"},l={project_id:e,user_id:i};return this.httpClient.post(t,l,n).subscribe(c=>{this.saveFile(c,".xlsx","template")})}getTemplateUnLock_CiCo(e,i){let t=this.attendanceCiCoAPI+"getTemplateUnLock_CiCo",n={responseType:"blob"},l={project_id:e,user_id:i};return this.httpClient.post(t,l,n).subscribe(c=>{this.saveFile(c,".xlsx","template")})}static{this.\u0275fac=function(i){return new(i||d)(N(ne))}}static{this.\u0275prov=H({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})();var rt=d=>({color:d}),ct=()=>({margin:"0 !important"});function st(d,h){if(d&1){let e=E();o(0,"button",22),g("click",function(){p(e);let t=_();return m(t.showImportFileLock=!t.showImportFileLock)}),b(),f(1,"svg",25),r(2," Kh\xF3a ATD"),a()}}function dt(d,h){if(d&1){let e=E();o(0,"div",45)(1,"input",46),g("change",function(t){p(e);let n=_();return m(n.onFileChange(t))}),a(),o(2,"button",22),g("click",function(){p(e);let t=_();return m(t.import())}),r(3," Submit"),a(),o(4,"button",47),g("click",function(){p(e);let t=_();return m(t.getTemplate())}),b(),f(5,"svg",48),r(6," Get Teamplate "),a()()}}function pt(d,h){if(d&1){let e=E();o(0,"div",49)(1,"div",50)(2,"p",51),r(3,"Lock: "),a(),o(4,"input",52),g("change",function(t){p(e);let n=_();return m(n.onFileChangeLock(t,"lock"))}),a(),o(5,"button",22),g("click",function(){p(e);let t=_();return m(t.importFileLock("lock"))}),r(6," Submit"),a(),o(7,"button",47),g("click",function(){p(e);let t=_();return m(t.getTemplateLock("lock"))}),b(),f(8,"svg",48),r(9," Get Teamplate "),a()(),S(),o(10,"div",53)(11,"p",51),r(12,"Unlock: "),a(),o(13,"input",54),g("change",function(t){p(e);let n=_();return m(n.onFileChangeLock(t,"unlock"))}),a(),o(14,"button",22),g("click",function(){p(e);let t=_();return m(t.importFileLock("unlock"))}),r(15," Submit"),a(),o(16,"button",47),g("click",function(){p(e);let t=_();return m(t.getTemplateLock("unlock"))}),b(),f(17,"svg",48),r(18," Get Teamplate "),a()()()}}function mt(d,h){d&1&&(o(0,"div",55),f(1,"i",56),o(2,"span",57),r(3,"\u0110ang load d\u1EEF li\u1EC7u"),a()())}function _t(d,h){if(d&1&&(o(0,"span"),r(1),a()),d&2){let e=_();s(),y(" Total: ",(e.listAttendance[0]==null?null:e.listAttendance[0].TotalRows)||"0",`
`)}}function ut(d,h){d&1&&(q(0),o(1,"tr")(2,"td",63),r(3,"Ch\u01B0a c\xF3 d\u1EEF li\u1EC7u"),a()(),W())}function gt(d,h){d&1&&(b(),f(0,"svg",67))}function ht(d,h){d&1&&(b(),f(0,"svg",68))}function ft(d,h){if(d&1){let e=E();o(0,"div")(1,"button",83),g("click",function(){p(e);let t=_(2),n=t.$implicit,l=t.index,c=_(2);return m(c.confirmUpdateImage(n,l))}),b(),f(2,"svg",84),a()()}}function Ct(d,h){if(d&1&&(o(0,"p"),r(1),V(2,"date"),a()),d&2){let e=_(2).$implicit;s(),I(M(2,1,e.time,"dd/MM/yyyy HH:mm:ss"))}}function xt(d,h){d&1&&(o(0,"p"),r(1,"--/--/---"),a())}function kt(d,h){d&1&&(o(0,"div",87)(1,"span",88),r(2,"Loading..."),a()())}function bt(d,h){if(d&1){let e=E();o(0,"button",22),g("click",function(){p(e);let t=_(3),n=t.$implicit,l=t.index,c=_(2);return m(c.handleDetectAI(l,n))}),b(),f(1,"svg",89),r(2," Detect "),a()}}function wt(d,h){if(d&1){let e=E();o(0,"div",85),w(1,kt,3,0,"div",86)(2,bt,3,0,"button",26),o(3,"button",22),g("click",function(){p(e);let t=_(2),n=t.$implicit,l=t.index,c=_(2);return m(c.confirmChangeImage(n,l))}),b(),f(4,"svg",84),a()()}if(d&2){let e=_(2).$implicit,i=_(2);s(),u("ngIf",i.loadding_detect),s(),u("ngIf",e.image&&e.photo)}}function Et(d,h){if(d&1){let e=E();o(0,"div")(1,"c-form-check")(2,"input",103),g("change",function(t){let n=p(e).$implicit,l=_(4).index,c=_(2);return m(c.handleCheckboxChange(l,n.label,t))}),a(),o(3,"label",98),r(4),a()()()}if(d&2){let e=h.$implicit,i=_(4),t=i.$implicit,n=i.index,l=_(2);s(2),u("id",t.key+n)("disabled",t.qc_lock===1)("checked",l.isChecked(n,e.label)),s(2),y(" ",e.label," ")}}function yt(d,h){if(d&1&&(o(0,"div",102),w(1,Et,5,4,"div",62),a()),d&2){let e=_(5);s(),u("ngForOf",e.listFailAttendance)}}function vt(d,h){if(d&1){let e=E();o(0,"div",59)(1,"button",104),g("click",function(){p(e);let t=_(3).index,n=_(2);return m(n.updateCheckAttendance(t))}),r(2," C\u1EADp nh\u1EADt "),b(),f(3,"svg",105),a()()}}function At(d,h){if(d&1){let e=E();o(0,"div")(1,"div",73)(2,"h4",90),r(3," AI Detect Result "),a(),o(4,"div",91)(5,"label",92)(6,"span"),r(7,"Face ID:"),a(),o(8,"div",19)(9,"span"),r(10),a(),o(11,"select",93),k("ngModelChange",function(t){p(e);let n=_(2).$implicit;return x(n.FaceVerifyOk,t)||(n.FaceVerifyOk=t),m(t)}),g("change",function(){p(e);let t=_(2).$implicit,n=_(2);return m(n.updateSwitchATDAI(t,"faceId"))}),o(12,"option",94),r(13,"\u0110\xFAng"),a(),o(14,"option",94),r(15,"Sai"),a()()()()()(),o(16,"div",95)(17,"div",96)(18,"c-form-check")(19,"input",97),k("ngModelChange",function(t){p(e);let n=_(2).index,l=_(2);return x(l.final_result[n],t)||(l.final_result[n]=t),m(t)}),a(),o(20,"label",98),r(21,"\u0110\u1EA1t"),a()(),o(22,"c-form-check")(23,"input",99),k("ngModelChange",function(t){p(e);let n=_(2).index,l=_(2);return x(l.final_result[n],t)||(l.final_result[n]=t),m(t)}),a(),o(24,"label",98),r(25,"Kh\xF4ng \u0111\u1EA1t"),a()()(),w(26,yt,2,1,"div",100)(27,vt,4,0,"div",101),a()()}if(d&2){let e=_(2),i=e.$implicit,t=e.index,n=_(2);s(10),y(" ",i.FaceVerifyAiOk=="1"?"True":i.FaceVerifyAiOk=="0"?"False":"__"," "),s(),C("ngModel",i.FaceVerifyOk),u("disabled",i.qc_lock==1),s(),u("value",1),s(2),u("value",0),s(5),u("name","flexRadioCheck"+t)("disabled",i.qc_lock===1),C("ngModel",n.final_result[t]),s(4),u("name","flexRadioCheck"+t)("disabled",i.qc_lock===1),C("ngModel",n.final_result[t]),s(3),u("ngIf",n.final_result[t]==="false"),s(),u("ngIf",i.qc_lock!==1)}}function It(d,h){if(d&1){let e=E();o(0,"tr")(1,"td",69)(2,"div",70)(3,"div",71)(4,"c-card-body",59)(5,"div",72)(6,"div",73)(7,"label",74),r(8,"H\xECnh Profile"),a(),o(9,"p"),r(10,"-------"),a(),w(11,ft,3,0,"div",32),o(12,"img",75),g("click",function(){p(e);let t=_().$implicit,n=_(2);return m(n.showImagePopup(t.image?t.image:"../../../../assets/images/avatars/default-avatar.jpg"))}),a()(),o(13,"div",76)(14,"label",77),r(15),a(),w(16,Ct,3,4,"p",32)(17,xt,2,0,"p",32)(18,wt,5,2,"div",78),o(19,"img",75),g("click",function(){p(e);let t=_().$implicit,n=_(2);return m(n.showImagePopup(t.photo?t.photo:"../../../../assets/images/avatars/default-avatar.jpg"))}),a(),w(20,At,28,13,"div",32),a()()()(),o(21,"div",79)(22,"textarea",80),k("ngModelChange",function(t){p(e);let n=_().index,l=_(2);return x(l.commentText[n],t)||(l.commentText[n]=t),m(t)}),a(),o(23,"button",81),g("click",function(){p(e);let t=_(),n=t.$implicit,l=t.index,c=_(2);return m(c.submitComment(n,l))}),r(24," L\u01B0u ghi ch\xFA "),b(),f(25,"svg",82),a()()()()()}if(d&2){let e=_(),i=e.$implicit,t=e.index,n=_(2);s(11),u("ngIf",i.qc_lock!=1),s(),u("src",i.image?i.image:"../../../../assets/images/avatars/default-avatar.jpg",D),s(3),y("H\xECnh: ",i.type,""),s(),u("ngIf",i.time),s(),u("ngIf",!i.time),s(),u("ngIf",i.qc_lock!=1),s(),u("src",i.photo?i.photo:"../../../../assets/images/avatars/default-avatar.jpg",D),s(),u("ngIf",i.photo),s(2),C("ngModel",n.commentText[t]),u("disabled",i.qc_lock===1),s(),u("disabled",i.qc_lock==1)}}function St(d,h){if(d&1){let e=E();q(0),o(1,"tr")(2,"td")(3,"button",22),g("click",function(){let t=p(e).index,n=_(2);return m(n.toggleRow(t))}),r(4),a()(),o(5,"td"),r(6),a(),o(7,"td"),r(8),a(),o(9,"td"),r(10),a(),o(11,"td")(12,"span"),r(13),a()(),o(14,"td")(15,"span"),r(16),a()(),o(17,"td")(18,"span"),r(19),a()(),o(20,"td"),r(21),a(),o(22,"td"),r(23),a(),o(24,"td"),r(25),V(26,"date"),a(),o(27,"td"),r(28),V(29,"date"),a(),o(30,"td"),r(31),V(32,"date"),a(),o(33,"td"),r(34),a(),o(35,"td")(36,"div",64),g("click",function(){let t=p(e).$implicit,n=_(2);return m(n.openConfirmModal(t))}),w(37,gt,1,0,"svg",65)(38,ht,1,0,"svg",66),r(39),a()()(),w(40,It,26,11,"tr",32),f(41,"tr"),W()}if(d&2){let e=h.$implicit,i=h.index,t=_(2);s(4),y(" ",t.expandedRows[i]?"-":"+"," "),s(2),y(" ",e.id," "),s(2),X("",e.att_code," - ",e.emp_name,""),s(2),y("Type: ",e.type," "),s(3),y("Face ID: ",e.FaceVerifyAiOk==1?"\u0110\xFAng":e.FaceVerifyAiOk==0?"Sai":"",""),s(3),y("Face ID: ",e.FaceVerifyOk==1?"\u0110\xFAng":e.FaceVerifyOk==0?"Sai":"",""),s(3),y(" ",e.final_result==="true"?"\u0110\u1EA1t":e.final_result==="false"?"Kh\xF4ng \u0111\u1EA1t: "+e.fail_reason:""," "),s(2),I(e.shop_code),s(2),I(e.shop_name||"--"),s(2),I(M(26,19,e.time,"dd/MM/yyyy HH:mm:ss")),s(3),I(M(29,22,e.last_update,"dd/MM/yyyy HH:mm:ss")),s(3),I(M(32,25,e.qc_date,"dd/MM/yyyy HH:mm:ss")),s(3),I(e.employee_name),s(2),u("ngStyle",J(28,rt,e.qc_lock==1?"red":"black")),s(),u("ngIf",e.qc_lock==1),s(),u("ngIf",e.qc_lock==0||e.qc_lock==null),s(),y(" ",e.qc_lock==1?"\u0110\xE3 kho\xE1":"Ch\u01B0a kho\xE1"," "),s(),u("ngIf",t.expandedRows[i])}}function Tt(d,h){if(d&1&&(o(0,"table",58)(1,"thead")(2,"tr",59)(3,"th",60),r(4,"#"),a(),o(5,"th",61),r(6,"M\xE3 b\xE1o c\xE1o"),a(),o(7,"th"),r(8,"Employee"),a(),o(9,"th"),r(10,"Type"),a(),o(11,"th"),r(12,"KQ AI"),a(),o(13,"th"),r(14,"KQ QC"),a(),o(15,"th"),r(16,"Tr\u1EA1ng th\xE1i QC"),a(),o(17,"th"),r(18,"M\xE3 C\u1EEDa H\xE0ng"),a(),o(19,"th"),r(20,"T\xEAn C\u1EEDa H\xE0ng"),a(),o(21,"th"),r(22,"Ng\xE0y L\xE0m Vi\u1EC7c"),a(),o(23,"th"),r(24,"QC l\u1EA7n cu\u1ED1i"),a(),o(25,"th"),r(26,"Ng\xE0y QC"),a(),o(27,"th"),r(28,"T\xEAn QC"),a(),o(29,"th"),r(30,"Tr\u1EA1ng Th\xE1i"),a()()(),o(31,"tbody"),w(32,ut,4,0,"ng-container",32)(33,St,42,30,"ng-container",62),a()()),d&2){let e=_();s(32),u("ngIf",e.listAttendance.length===0),s(),u("ngForOf",e.listAttendance)}}function Vt(d,h){if(d&1){let e=E();o(0,"div",106),g("click",function(){p(e);let t=_();return m(t.closePopup())}),o(1,"img",107),g("click",function(t){return p(e),m(t.stopPropagation())}),a()()}if(d&2){let e=_();s(),u("src",e.selectedImage,D)}}function Mt(d,h){if(d&1){let e=E();o(0,"div",11)(1,"c-smart-pagination",108),g("activePageChange",function(t){p(e);let n=_();return m(n.onPageChange(t))}),a(),o(2,"input",109),k("ngModelChange",function(t){p(e);let n=_();return x(n.gotoPage,t)||(n.gotoPage=t),m(t)}),g("keyup.enter",function(){p(e);let t=_();return m(t.jumpToPage())}),a()()}if(d&2){let e=_();s(),u("activePage",e.currentPage)("pages",e.pagination)("ngStyle",Y(5,ct)),s(),C("ngModel",e.gotoPage),u("max",e.pagination)}}var ri=(()=>{class d{constructor(e,i){this._service=e,this.iconSet=i,this.user_id=0,this.isSup=!1,this.listFailAttendance=[{key:"mask",label:"\u0110eo kh\u1EA9u trang"},{key:"noFace",label:"Kh\xF4ng hi\u1EC7n di\u1EC7n khu\xF4n m\u1EB7t trong \u1EA3nh"},{key:"notFullFace",label:"Kh\xF4ng ch\u1EE5p full m\u1EB7t"},{key:"otherDevice",label:"Ch\u1EE5p qua thi\u1EBFt b\u1ECB kh\xE1c"},{key:"sharedImage",label:"D\xF9ng chung h\xECnh"},{key:"notMatchProfile",label:"Kh\xF4ng gi\u1ED1ng h\xECnh profile"}],this.formatDate=t=>{let n=String(t.getDate()).padStart(2,"0"),l=String(t.getMonth()+1).padStart(2,"0"),c=t.getFullYear();return`${n}/${l}/${c}`},this.showImportFile=!1,this.showImportFileLock=!1,this.pageNumber=1,this.rowPerPageEmp=20,this.employee_code="",this.attendanceStatus={},this.selectedLabelsFail={},this.selectedCheckFail={},this.project_id=55,this.final_result={},this.fail_reason="",this.type="",this.time=new Date,this.work_date=0,this.att_code="",this.co_result="",this.co_final_result={},this.expandedRows={},this.reasonCheckFail={},this.rowPerPage=20,this.totalRow=0,this.pagination=1,this.shop_code="",this.isLoading=!1,this.statusQC=-1,this.kqqc="-1",this.kqai="-1",this.typeFilter="-1",this.qc_lock=-1,this.emp_code="",this.id_BC="",this.confirmLockVisible=!1,this.selectedItemLock=null,this.itemLock=0,this.currentPage=1,this.gotoPage=1,this.toast={visible_toast:!1,message_toast:"",background:""},this.commentText={},this.visableModalChangeImage=!1,this.visableModalUpdateImage=!1,this.photo_link="",this.selectedImage=null,this.loadding_detect=!1,i.icons={cilLockLocked:Ke,cilLockUnlocked:He,cilFace:Ue,cilSave:Ge,cilSearch:ze,cilDataTransferDown:We,cilWindowMinimize:Je,cilLevelUp:je,cilSend:Xe,cilSettings:Ye,cilPaperclip:Ne,cilArrowCircleTop:Be,cilCheckCircle:qe}}ngOnInit(){this.user_id=F.loadUser().employee_id,this.isSup=F.loadUser().employee_type_id==3,this.fromDate=new Date,this.toDate=new Date}handleCheckboxChange(e,i,t){let n=t.target.checked;this.selectedCheckFail[e]||(this.selectedCheckFail[e]=this.listAttendance[e]?.fail_reason?.split(", ")||[]),n?this.selectedCheckFail[e].includes(i)||(this.selectedCheckFail[e]=[...this.selectedCheckFail[e],i]):this.selectedCheckFail[e]=this.selectedCheckFail[e].filter(l=>l!==i)}updateCheckAttendance(e){if(this.fail_reason="",this.final_result[e]=="false"&&(this.fail_reason=(this.selectedCheckFail[e]||[]).filter(i=>i.trim()!=="").join(", "),!this.fail_reason)){this.toggleToast("H\xE3y ch\u1ECDn l\xFD do kh\xF4ng \u0111\u1EA1t","bg-danger");return}if(this.listAttendance[e].FaceVerifyOk=="0"&&this.final_result[e]=="true"){this.toggleToast("Sai logic! Kh\xF4ng th\u1EC3 update","bg-danger");return}this.att_code=this.listAttendance[e].att_code,this.type=this.listAttendance[e].type,this.time=this.listAttendance[e].time,this.work_date=this.listAttendance[e].work_date,this._service.ReCheckAttendanceAI(this.user_id,F.ProjectID(),this.att_code,this.fail_reason,this.final_result[e],this.type,this.time,this.work_date).subscribe(i=>{i.result==="OK"?(this.listAttendance[e].final_result=this.final_result[e],this.listAttendance[e].fail_reason=this.fail_reason,this.toggleToast("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng","bg-success")):this.toast.message_toast="C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i"})}toggleRow(e){this.expandedRows[e]=!this.expandedRows[e],this.listAttendance[e]&&(this.reasonCheckFail[e]=this.listAttendance[e].fail_reason?this.listAttendance[e].fail_reason.split(",").map(i=>i.trim()):[]),this.final_result[e]=this.listAttendance[e]?.final_result||"",this.commentText[e]=this.listAttendance[e]?.comment||""}resetKQQC(){this.type="",this.result="",this.final_result_filter=""}filter(e){this.resetKQQC(),this.statusQC=-1,this.emp_code?this.att_code=this.emp_code:this.att_code="",this.id_BC||(this.id_BC=""),this.currentPage=e,this.expandedRows={},this.pageNumber=e,this.isLoading=!0,this._service.FilterAttendanceAI(this.user_id,this.project_id,this.att_code,this.shop_code,P.DateToInt(this.fromDate),P.DateToInt(this.toDate),this.kqai,this.kqqc,this.rowPerPage,this.pageNumber,this.qc_lock,this.typeFilter,this.id_BC).subscribe(i=>{if(i.result=="OK"){let t=i.data;this.listAttendance=t,this.isLoading=!1,this.totalRow=this.listAttendance[0]?.TotalRows|0,this.pagination=Math.ceil(this.totalRow/this.rowPerPage)}})}export(){this.isLoading=!0,this._service.ExportAttendanceAI(this.project_id,this.user_id,P.DateToInt(this.fromDate),P.DateToInt(this.toDate),this.typeFilter,this.att_code,this.shop_code,this.kqai,this.kqqc,this.qc_lock,this.id_BC).subscribe({next:e=>{this.saveFile(e,".xlsx","atd_result")},error:e=>{console.error("Export failed:",e)},complete:()=>{this.isLoading=!1}})}saveFile(e,i=".xlsx",t=""){let n=new Date,l="download_"+t+"_"+n.getFullYear().toString()+(n.getMonth()+1)+n.getDate()+n.toLocaleTimeString().replace(/[ ]|[,]|[:]/g,"").trim()+i;(0,nt.saveAs)(e,l)}import(){if(!this.fileImport){this.toggleToast("Kh\xF4ng c\xF3 file import n\xE0o!","bg-danger");return}let e=new FormData;e.append("files",this.fileImport),this.isLoading=!0,this._service.ATD_ImportCiCo(e,this.user_id,F.ProjectID()).subscribe(i=>{i.result==="OK"?(this.resetFileInput(),this.isLoading=!1,this.toggleToast("Import th\xE0nh c\xF4ng","bg-success")):(this.isLoading=!1,this.toggleToast(i.message,"bg-danger"))})}onFileChange(e){let i=e.target.files[0];i&&(this.fileImport=i)}resetFileInput(){let e=document.getElementById("formFileImport");e&&(e.value=""),this.fileImport=null}getTemplate(){this._service.DetectAI_getTemplateCiCo(this.project_id,this.user_id)}lockAtdItem(e){if(this.confirmLockVisible=!1,e.qc_lock!==1&&!e.final_result){this.toggleToast("Kh\xF4ng th\u1EC3 kho\xE1 khi ch\u01B0a QC","bg-danger");return}this._service.LockAttendanceAI(this.user_id,this.project_id,e.att_code,e.work_date,e.type,e.time,e.id_BC).subscribe(i=>{i.result=="OK"&&(e.qc_lock=!e.qc_lock,e.qc_lock==1?this.toggleToast("Kh\xF3a th\xE0nh c\xF4ng","bg-success"):this.toggleToast("M\u1EDF kh\xF3a th\xE0nh c\xF4ng","bg-success"))})}openConfirmModal(e){this.isSup&&(e.qc_lock===1?this.itemLock=1:this.itemLock=0,this.selectedItemLock=e,this.confirmLockVisible=!0)}confirmActionLock(){this.lockAtdItem(this.selectedItemLock)}onPageChange(e){this.currentPage=e,this.expandedRows={},this.filter(e)}jumpToPage(){this.currentPage=this.gotoPage,this.filter(this.currentPage)}isChecked(e,i){return this.reasonCheckFail[e]?.includes(i)??!1}toggleToast(e,i){this.toast.visible_toast=!0,this.toast.background=i,this.toast.message_toast=e,setTimeout(()=>{this.toast.visible_toast=!1},2e3)}updateSwitchATDAI(e,i){let t=e.type,n=0;n=e.FaceVerifyOk,this._service.SwitchAttendanceDetectAI(this.user_id,this.project_id,e.att_code,t,i,n,e.work_date,e.time).subscribe(l=>{l.result==="OK"?this.toggleToast("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng","bg-success"):this.toggleToast("C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i","bg-danger")})}submitComment(e,i){this._service.detectAi_commentNoteCiCo(e.type,e.att_code,e.time,e.work_date,this.project_id,this.user_id,this.user_id,this.commentText[i],e.id_BC).subscribe(t=>{t.result==="OK"?(this.listAttendance[i].comment=this.commentText[i],this.toggleToast("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng","bg-success")):this.toast.message_toast="Comment th\u1EA5t b\u1EA1i"})}confirmChangeImage(e,i){this.visableModalChangeImage=!0,this.itemChangeImage=e,this.itemChangeImage.i=i}confirmUpdateImage(e,i){this.visableModalUpdateImage=!0,this.itemChangeImage=e}onFileSelected(e){let i=e.target.files[0];i&&(this.fileUpdateImg=i)}handleUpdateImg(){let e=new FormData;e.append("files",this.fileUpdateImg),this.fileUpdateImg?this._service.ewo_ATD_uploadImgProfile(this.user_id,this.project_id,this.itemChangeImage.id,this.itemChangeImage.att_code,e).subscribe(i=>{let t=i.data;this.resetUploadImg(),i.result==U.ok?(this.toggleToast("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng","bg-success"),this.itemChangeImage.image=t[0][""]):this.toggleToast("C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i","bg-danger"),this.visableModalUpdateImage=!1}):this.toggleToast("Kh\xF4ng c\xF3 \u1EA3nh \u0111\u1EC3 c\u1EADp nh\u1EADt","bg-danger")}resetUploadImg(){let e=document.getElementById("uploadImage");e&&(e.value=""),this.fileImport=null}makeProfile(){let e=this.itemChangeImage;if(!e.photo){this.toggleToast("Kh\xF4ng c\xF3 \u1EA3nh \u0111\u1EC3 c\u1EADp nh\u1EADt","bg-danger");return}this.photo_link=e.photo,this._service.detectAi_updateImgProfileCiCo(this.user_id,this.project_id,this.photo_link,e.att_code,e.emp_name,e.id_BC).subscribe(i=>{i.result==="OK"?(this.photo_link="",e.image=e.photo,this.toggleToast("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng","bg-success"),this.visableModalChangeImage=!1):this.toast.message_toast="C\u1EADp nh\u1EADt \u1EA3nh th\u1EA5t b\u1EA1i"})}showImagePopup(e){this.selectedImage=e}closePopup(){this.selectedImage=null}handleScrollOnTop(){window.scrollTo({top:0,behavior:"smooth"})}handleDetectAI(e,i){console.log(i);let t=i.image,n=i.photo;this.loadding_detect=!0,this._service.recheck_ResultAICiCo(n,t,this.project_id,this.user_id,i.id,"").subscribe(l=>{if(l.result===U.ok){let c=l.data;this.loadding_detect=!1,this.listAttendance[e].result=c.faceVerifyAiOk==1?"true":c.faceVerifyAiOk==0?"false":"",i.FaceVerifyAiOk=c.faceVerifyAiOk,this.toggleToast("Detect th\xE0nh c\xF4ng","bg-success")}})}downloadImage1(e){console.log("imageUrlimageUrl",e);let i=new Date,t="image_download_"+i.getFullYear().toString()+(i.getMonth()+1)+i.getDate()+i.toLocaleTimeString().replace(/[ ]|[,]|[:]/g,"").trim()+"."+e.split(".").pop();fetch(e).then(n=>n.blob()).then(n=>{let l=window.URL.createObjectURL(n),c=document.createElement("a");c.href=l,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}).catch(n=>console.error("Error downloading the image:",n))}importFileLock(e){let i=new FormData;if(i.append("user_id",this.user_id.toString()),i.append("project_id",this.project_id.toString()),e=="lock"){if(i.append("files",this.fileImportLock),!this.fileImportLock){this.toggleToast("Ch\u01B0a c\xF3 file n\xE0o import","bg-danger");return}}else if(e=="unlock"&&(i.append("files",this.fileImportUnlock),!this.fileImportUnlock)){this.toggleToast("Ch\u01B0a c\xF3 file n\xE0o import","bg-danger");return}e=="lock"?(this._service.ATD_ImportEmpLock(i).subscribe(t=>{let n=new FileReader;n.onload=()=>{try{let l=JSON.parse(n.result);l.result=="ERROR"?this.toggleToast(l.message,"bg-danger"):l.result=="OK"?this.toggleToast(l.message,"bg-success"):this.toggleToast("Thao t\xE1c kh\xF4ng x\xE1c \u0111\u1ECBnh","bg-warning")}catch{this.saveFile(t,".xlsx","result_LockATD"),this.toggleToast("C\xF3 l\u1ED7i x\u1EA3y ra! Nh\u1EADn file k\u1EBFt qu\u1EA3","bg-danger")}},n.readAsText(t)},t=>{this.toggleToast("L\u1ED7i t\u1EA3i file .","bg-danger")}),this.resetFileInputLock("lock")):e=="unlock"&&(this._service.ATD_ImportEmpUnLock(i).subscribe(t=>{let n=new FileReader;n.onload=()=>{try{let l=JSON.parse(n.result);l.result=="ERROR"?this.toggleToast(l.message,"bg-danger"):l.result=="OK"?this.toggleToast(l.message,"bg-success"):this.toggleToast("Thao t\xE1c kh\xF4ng x\xE1c \u0111\u1ECBnh","bg-warning")}catch{this.saveFile(t,".xlsx","result_UnLockATD"),this.toggleToast("C\xF3 l\u1ED7i x\u1EA3y ra! Nh\u1EADn file k\u1EBFt qu\u1EA3","bg-danger")}},n.readAsText(t)},t=>{this.toggleToast("L\u1ED7i t\u1EA3i file .","bg-danger")}),this.resetFileInputLock("unlock"))}resetFileInputLock(e){if(e=="lock"){let i=document.getElementById("formFileImportLock");i&&(i.value=""),this.fileImportLock=null}else{let i=document.getElementById("formFileImportUnlock");i&&(i.value=""),this.fileImportUnlock=null}}getTemplateLock(e){e=="lock"?this._service.getTemplateLock_CiCo(this.project_id,this.user_id):this._service.getTemplateUnLock_CiCo(this.project_id,this.user_id)}onFileChangeLock(e,i){let t=e.target.files[0];t&&(i=="lock"?this.fileImportLock=t:this.fileImportUnlock=t)}static{this.\u0275fac=function(i){return new(i||d)(B(it),B(ge))}}static{this.\u0275cmp=G({type:d,selectors:[["app-attendance-result-qc"]],decls:149,vars:31,consts:[["datePicker","cDatePicker"],[1,"mt-1","mb-1"],[1,"p-2"],["md","3"],[1,"clearfix"],[1,"pt-3"],["inputReadOnly","",3,"ngModelChange","ngModel","inputDateFormat"],[1,"input-prepend"],["cFormControl","","placeholder","Nh\u1EADp m\xE3 b\xE1o c\xE1o","type","text",3,"ngModelChange","ngModel"],["cFormControl","","placeholder","Nh\u1EADp m\xE3 nh\xE2n vi\xEAn","type","text",3,"ngModelChange","ngModel"],["cFormControl","","placeholder","Nh\u1EADp m\xE3 c\u1EEDa h\xE0ng","type","text",3,"ngModelChange","ngModel"],[2,"display","flex","gap","10px"],["cSelect","",2,"width","100%","padding","6px 12px","border","1px solid #dbdfe6",3,"ngModelChange","ngModel"],["value","-1"],["value","0"],["value","true"],["value","false"],["value","checkin"],["value","checkout"],[1,""],["value","1"],[2,"display","flex","gap","5px"],["cButton","","color","primary",3,"click"],["cIcon","","name","cilSearch"],["cIcon","","name","cilDataTransferDown"],["cIcon","","name","cilLevelUp"],["cButton","","color","primary",3,"click",4,"ngIf"],["style","display: flex; gap:5px; width: 700px;",4,"ngIf"],["class","my-2",4,"ngIf"],["class","fade show","style","text-align: center; height: 20vh ; padding-top:calc(20vh / 2); background-color: white;",4,"ngIf"],[2,"position","fixed","top","80px","right","0","background-color","cornflowerblue","color","white","z-index","1000",3,"autohide","delay","visible"],[1,"mr-auto"],[4,"ngIf"],["class","table","style","table-layout: fixed; width: 100%;",4,"ngIf"],[3,"visibleChange","visible"],[1,"modal-title"],[1,"btn-close",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],["id","uploadImage","cFormControl","","placeholder","Nh\u1EADp h\xECnh b\xE1o c\xE1o","type","file",3,"change"],["style",`
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9000;
  `,3,"click",4,"ngIf"],["style","display: flex; gap: 10px;",4,"ngIf"],[1,"position-fixed","end-0","bottom-0","m-4",2,"cursor","pointer",3,"click"],["cIcon","","name","cilArrowCircleTop",1,"bg-white","rounded","p-2",2,"width","40px","height","40px"],["color","#ff0000",3,"height"],[2,"display","flex","gap","5px","width","700px"],["cFormControl","","id","formFileImport","type","file",3,"change"],["cButton","","color","primary",2,"min-width","150px",3,"click"],["cIcon","","name","cilPaperclip"],[1,"my-2"],[2,"display","flex","align-items","center","gap","5px","width","700px"],[1,"m-0"],["cFormControl","","id","formFileImportLock","type","file",3,"change"],[2,"display","flex","align-items","center","gap","5px","width","700px","margin-top","10px"],["cFormControl","","id","formFileImportUnlock","type","file",3,"change"],[1,"fade","show",2,"text-align","center","height","20vh","padding-top","calc(20vh / 2)","background-color","white"],[1,"spinner-grow","spinner-grow-sm","text-success"],[1,"m-1","text-success"],[1,"table",2,"table-layout","fixed","width","100%"],[2,"text-align","center"],[2,"width","60px"],[2,"width","120px"],[4,"ngFor","ngForOf"],["colspan","14",1,"text-center","p-5"],[2,"cursor","pointer",3,"click","ngStyle"],["cIcon","","name","cilLockLocked",4,"ngIf"],["cIcon","","name","cilLockUnlocked",4,"ngIf"],["cIcon","","name","cilLockLocked"],["cIcon","","name","cilLockUnlocked"],["colspan","14"],[2,"display","flex","gap","20px"],[2,"padding","20px"],[2,"display","flex","gap","50px"],[2,"padding","15px"],["for","",2,"width","100%","font-weight","bold"],["alt","img-check-out","width","250","height","250",3,"click","src"],[1,"checkin-container"],["for","",2,"width","100%"],["class","d-flex gap-2 justify-content-end",4,"ngIf"],[2,"margin","auto 0"],[2,"padding","10px","border","1px solid #ccc","border-radius","5px","width","100%",3,"ngModelChange","ngModel","disabled"],["cButton","","color","primary",2,"padding","10px 15px","font-weight","bold",3,"click","disabled"],["cIcon","","name","cilSend"],["cButton","","color","primary",1,"my-2",3,"click"],["cIcon","","name","cilSettings"],[1,"d-flex","gap-2","justify-content-end"],["class","spinner-border text-primary","role","status",4,"ngIf"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["cIcon","","name","cilCheckCircle"],[2,"margin","0 0 10px","text-align","center","font-size","16px","font-weight","bold","color","#333"],[2,"display","flex","flex-direction","column","gap","10px"],[2,"display","flex","justify-content","space-between","align-items","center"],["cSelect","",2,"padding","5px","border-radius","5px","border","1px solid #ccc",3,"ngModelChange","change","ngModel","disabled"],[3,"value"],[1,"form-container"],[1,"radio-group",2,"display","flex","gap","15px","justify-content","center"],["cFormCheckInput","","type","radio","value","true",3,"ngModelChange","name","disabled","ngModel"],["cFormCheckLabel",""],["cFormCheckInput","","type","radio","value","false",3,"ngModelChange","name","disabled","ngModel"],["class","fail-options","style","display: flex; flex-direction: column; align-items: baseline;",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[1,"fail-options",2,"display","flex","flex-direction","column","align-items","baseline"],["cFormCheckInput","","type","checkbox",3,"change","id","disabled","checked"],["cButton","","color","warning",2,"margin","10px 0",3,"click"],["cIcon","","name","cilSave"],[2,"position","fixed","top","0","left","0","width","100vw","height","100vh","background","rgba(0,0,0,0.6)","display","flex","align-items","center","justify-content","center","z-index","9000",3,"click"],["alt","Popup",2,"max-width","90%","max-height","90%","border","5px solid white","border-radius","8px",3,"click","src"],["align","center",3,"activePageChange","activePage","pages","ngStyle"],["type","number","min","1",2,"text-align","center","width","80px","height","36px","padding","5px","border","1px solid #ccc","border-radius","5px",3,"ngModelChange","keyup.enter","ngModel","max"]],template:function(i,t){if(i&1){let n=E();o(0,"c-card",1)(1,"c-row",2)(2,"c-col",3)(3,"span",4)(4,"h6",5),r(5,"T\u1EEB ng\xE0y"),a()(),o(6,"c-date-picker",6,0),k("ngModelChange",function(c){return p(n),x(t.fromDate,c)||(t.fromDate=c),m(c)}),a()(),o(8,"c-col",3)(9,"span",4)(10,"h6",5),r(11,"\u0110\u1EBFn ng\xE0y"),a()(),o(12,"c-date-picker",6,0),k("ngModelChange",function(c){return p(n),x(t.toDate,c)||(t.toDate=c),m(c)}),a()(),o(14,"c-col",3)(15,"span",4)(16,"h6",5),r(17,"M\xE3 b\xE1o c\xE1o"),a()(),o(18,"c-input-group",7)(19,"input",8),k("ngModelChange",function(c){return p(n),x(t.id_BC,c)||(t.id_BC=c),m(c)}),a()()(),o(20,"c-col",3)(21,"span",4)(22,"h6",5),r(23,"Nh\xE2n Vi\xEAn"),a()(),o(24,"c-input-group",7)(25,"input",9),k("ngModelChange",function(c){return p(n),x(t.emp_code,c)||(t.emp_code=c),m(c)}),a()()(),o(26,"c-col",3)(27,"span",4)(28,"h6",5),r(29,"C\u1EEDa h\xE0ng"),a()(),o(30,"c-input-group",7)(31,"input",10),k("ngModelChange",function(c){return p(n),x(t.shop_code,c)||(t.shop_code=c),m(c)}),a()()(),o(32,"c-col",3)(33,"span",4)(34,"h6",5),r(35,"K\u1EBFt qu\u1EA3 AI"),a()(),o(36,"div",11)(37,"select",12),k("ngModelChange",function(c){return p(n),x(t.kqai,c)||(t.kqai=c),m(c)}),o(38,"option",13),r(39,"T\u1EA5t c\u1EA3"),a(),o(40,"option",14),r(41,"1 - Ch\u01B0a c\xF3 k\u1EBFt qu\u1EA3"),a(),o(42,"option",15),r(43,"2 - K\u1EBFt qu\u1EA3 True"),a(),o(44,"option",16),r(45,"3 - K\u1EBFt qu\u1EA3 False"),a()()()(),o(46,"c-col",3)(47,"span",4)(48,"h6",5),r(49,"K\u1EBFt qu\u1EA3 QC"),a()(),o(50,"div",11)(51,"select",12),k("ngModelChange",function(c){return p(n),x(t.kqqc,c)||(t.kqqc=c),m(c)}),o(52,"option",13),r(53,"T\u1EA5t c\u1EA3"),a(),o(54,"option",14),r(55,"1 - Ch\u01B0a c\xF3 k\u1EBFt qu\u1EA3"),a(),o(56,"option",15),r(57,"2 - K\u1EBFt qu\u1EA3 True"),a(),o(58,"option",16),r(59,"3 - K\u1EBFt qu\u1EA3 False"),a()()()(),o(60,"c-col",3)(61,"span",4)(62,"h6",5),r(63,"Lo\u1EA1i"),a()(),o(64,"div",11)(65,"select",12),k("ngModelChange",function(c){return p(n),x(t.typeFilter,c)||(t.typeFilter=c),m(c)}),o(66,"option",13),r(67,"T\u1EA5t c\u1EA3"),a(),o(68,"option",17),r(69,"Check In"),a(),o(70,"option",18),r(71,"Check Out"),a()()()(),o(72,"c-col",3)(73,"span",4)(74,"h6",5),r(75,"Tr\u1EA1ng th\xE1i"),a()(),o(76,"div",19)(77,"select",12),k("ngModelChange",function(c){return p(n),x(t.qc_lock,c)||(t.qc_lock=c),m(c)}),o(78,"option",13),r(79,"T\u1EA5t c\u1EA3"),a(),o(80,"option",14),r(81,"Ch\u01B0a kho\xE1"),a(),o(82,"option",20),r(83,"\u0110\xE3 kho\xE1"),a()()()(),o(84,"c-row",2)(85,"div",21)(86,"button",22),g("click",function(){return p(n),m(t.filter(1))}),b(),f(87,"svg",23),r(88," T\xECm ki\u1EBFm"),a(),S(),o(89,"button",22),g("click",function(){return p(n),m(t.export())}),b(),f(90,"svg",24),r(91," Export"),a(),S(),o(92,"button",22),g("click",function(){return p(n),m(t.showImportFile=!t.showImportFile)}),b(),f(93,"svg",25),r(94," Import"),a(),w(95,st,3,0,"button",26),a()(),w(96,dt,7,0,"div",27),a()(),w(97,pt,19,0,"div",28)(98,mt,4,0,"div",29),S(),o(99,"c-toast",30)(100,"c-toast-header")(101,"strong",31),r(102,"Th\xF4ng b\xE1o"),a()(),o(103,"c-toast-body"),r(104),a()(),w(105,_t,2,1,"span",32)(106,Tt,34,2,"table",33),o(107,"c-modal",34),k("visibleChange",function(c){return p(n),x(t.visableModalChangeImage,c)||(t.visableModalChangeImage=c),m(c)}),o(108,"c-modal-header")(109,"h5",35),r(110,"X\xE1c nh\u1EADn thay h\xECnh profile"),a(),o(111,"button",36),g("click",function(){return p(n),m(t.visableModalChangeImage=!1)}),a()(),o(112,"c-modal-body"),r(113," B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n thay \u0111\u1ED5i h\xECnh profile cho nh\xE2n vi\xEAn n\xE0y kh\xF4ng? "),a(),o(114,"c-modal-footer")(115,"button",37),g("click",function(){return p(n),m(t.visableModalChangeImage=!1)}),r(116,"H\u1EE7y"),a(),o(117,"button",38),g("click",function(){return p(n),m(t.makeProfile())}),r(118,"X\xE1c nh\u1EADn"),a()()(),o(119,"c-modal",34),k("visibleChange",function(c){return p(n),x(t.visableModalUpdateImage,c)||(t.visableModalUpdateImage=c),m(c)}),o(120,"c-modal-header")(121,"h5",35),r(122,"Update h\xECnh profile"),a(),o(123,"button",36),g("click",function(){return p(n),m(t.visableModalUpdateImage=!1)}),a()(),o(124,"c-modal-body")(125,"c-input-group",7)(126,"input",39),g("change",function(c){return p(n),m(t.onFileSelected(c))}),a()()(),o(127,"c-modal-footer")(128,"button",37),g("click",function(){return p(n),m(t.visableModalUpdateImage=!1)}),r(129,"H\u1EE7y"),a(),o(130,"button",38),g("click",function(){return p(n),m(t.handleUpdateImg())}),r(131,"X\xE1c nh\u1EADn"),a()()(),w(132,Vt,2,1,"div",40),o(133,"c-modal",34),k("visibleChange",function(c){return p(n),x(t.confirmLockVisible,c)||(t.confirmLockVisible=c),m(c)}),o(134,"c-modal-header")(135,"h5",35),r(136,"X\xE1c nh\u1EADn"),a(),o(137,"button",36),g("click",function(){return p(n),m(t.confirmLockVisible=!1)}),a()(),o(138,"c-modal-body"),r(139),a(),o(140,"c-modal-footer")(141,"button",37),g("click",function(){return p(n),m(t.confirmLockVisible=!1)}),r(142,"H\u1EE7y"),a(),o(143,"button",38),g("click",function(){return p(n),m(t.confirmActionLock())}),r(144,"X\xE1c nh\u1EADn"),a()()(),w(145,Mt,3,6,"div",41),o(146,"div",42),g("click",function(){return p(n),m(t.handleScrollOnTop())}),b(),f(147,"svg",43),a(),S(),f(148,"ngx-loading-bar",44)}i&2&&(s(6),C("ngModel",t.fromDate),u("inputDateFormat",t.formatDate),s(6),C("ngModel",t.toDate),u("inputDateFormat",t.formatDate),s(7),C("ngModel",t.id_BC),s(6),C("ngModel",t.emp_code),s(6),C("ngModel",t.shop_code),s(6),C("ngModel",t.kqai),s(14),C("ngModel",t.kqqc),s(14),C("ngModel",t.typeFilter),s(12),C("ngModel",t.qc_lock),s(18),u("ngIf",t.isSup),s(),u("ngIf",t.showImportFile),s(),u("ngIf",t.showImportFileLock),s(),u("ngIf",t.isLoading),s(),u("autohide",!0)("delay",2e3)("visible",t.toast.visible_toast),s(4),z(t.toast.background),s(),y(" ",t.toast.message_toast," "),s(),u("ngIf",!t.isLoading&&(t.listAttendance==null?null:t.listAttendance.length)>0),s(),u("ngIf",t.listAttendance&&!t.isLoading),s(),C("visible",t.visableModalChangeImage),s(12),C("visible",t.visableModalUpdateImage),s(13),u("ngIf",t.selectedImage),s(),C("visible",t.confirmLockVisible),s(6),y(" ",t.itemLock==1?"B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n m\u1EDF kho\xE1 k\u1EBFt qu\u1EA3 n\xE0y kh\xF4ng?":"B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n kho\xE1 k\u1EBFt qu\u1EA3 n\xE0y kh\xF4ng?"," "),s(6),u("ngIf",t.listAttendance),s(3),u("height","5px"))},dependencies:[fe,he,ue,de,pe,oe,re,se,ce,ae,_e,me,le,Ie,Ae,Ee,et,$e,ye,Ce,be,ke,ve,Pe,Fe,De,xe,ie,Z,$,ee,te,we,Me,Ve,Se,Te,Oe,Re,Le,Qe],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ccc}th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:500}.section-title[_ngcontent-%COMP%]{background-color:#ddd;font-size:16px;font-weight:700}th[_ngcontent-%COMP%]:nth-child(3), th[_ngcontent-%COMP%]:nth-child(4), th[_ngcontent-%COMP%]:nth-child(6), th[_ngcontent-%COMP%]:nth-child(7){min-width:150px}.checkin-container[_ngcontent-%COMP%]{background:#fff;padding:10px 50px;border-radius:8px;box-shadow:0 4px 10px #0000001a;max-width:450px;text-align:center}.checkin-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333;display:block;margin-bottom:5px}.checkin-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#555;font-weight:500}.checkin-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px;border:2px solid #ddd;transition:.3s}.checkin-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{border-color:#007bff;transform:scale(1.05)}.checkin-container[_ngcontent-%COMP%]   .ai-detect[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#00d4ff);color:#fff;padding:10px;border-radius:8px;margin-top:15px}.checkin-container[_ngcontent-%COMP%]   .ai-detect[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;text-transform:uppercase}.checkin-container[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}.checkin-container[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   c-form-check[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.checkin-container[_ngcontent-%COMP%]   .fail-options[_ngcontent-%COMP%]{text-align:left;margin-left:15px;padding-top:10px}.checkin-container[_ngcontent-%COMP%]   .fail-options[_ngcontent-%COMP%]   c-form-check[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.checkin-container[_ngcontent-%COMP%]   .update-button[_ngcontent-%COMP%]{margin-top:15px}.checkin-container[_ngcontent-%COMP%]   .update-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 18px;font-size:14px;border-radius:5px;cursor:pointer;font-weight:700;transition:.3s;background-color:#28a745;color:#fff;border:none}.checkin-container[_ngcontent-%COMP%]   .update-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838;transform:scale(1.05)}"]})}}return d})();export{ri as AttendanceResultQcComponent};
