import{a as Ve}from"./chunk-26M4WOOW.js";import{a as H}from"./chunk-RJESRZJ5.js";import{B as we,C as Ie,T as Ce,fa as ve,gb as xe}from"./chunk-OVEX3KHJ.js";import{a as Se}from"./chunk-FYYLBBTR.js";import{Ab as Ee,Cb as ye,Ea as ne,H as X,I as Q,L as K,Qa as le,Ra as re,U as J,W as A,X as Y,Y as Z,Z as $,a as z,aa as ee,ca as te,cb as ae,d as G,db as se,eb as me,fb as ce,hb as pe,ia as ie,ib as de,kb as ge,lb as ue,mb as _e,vb as he,wb as be,ya as oe,zb as fe}from"./chunk-55Y7RW7N.js";import{Ac as r,Bc as R,Cb as C,Cc as b,Fc as y,Gc as w,Hc as I,Hd as N,Lc as B,Rb as u,Xc as W,ba as T,bc as i,cc as o,db as E,dc as h,ec as U,fc as k,ga as V,hc as S,ib as m,kc as g,mc as p,nb as P,ra as a,sa as s,sc as j,ta as v,tc as F,ua as x,uc as L,wb as M,wd as O,xd as q,yc as D}from"./chunk-XOKJR3V5.js";import{g as Te}from"./chunk-WWX6BADO.js";var Pe=Te(Ve());var Ae=(()=>{class c{constructor(t){this.httpClient=t,this.rootAPI=Se.apiUrl+"AttendanceAi/",this.urlEmployee={urlgetList:"ewo_ATD_getEmployeesPPT",urlExport:"ewo_ATD_exportEmployeesPPT"}}GetListEmployeeAbbott(t,n,e,l,_){return this.httpClient.post(this.rootAPI+this.urlEmployee.urlgetList,{project_id:t,qc_id:n,pageNumber:e,rowPerPage:l,employee_code:_})}exportEmployee(t,n){console.log("EmployeePPT Export RawData: ");let e=new z({"Content-Type":"application/json"});return this.httpClient.post(this.rootAPI+this.urlEmployee.urlExport,{project_id:t,qc_id:n},{headers:e,responseType:"blob"})}static{this.\u0275fac=function(n){return new(n||c)(V(G))}}static{this.\u0275prov=T({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var ke=["myInputFile"];function je(c,f){if(c&1&&(i(0,"c-multi-select-option",37),r(1),o()),c&2){let t=f.$implicit;u("value",t.project_id)("selected",t.selected),m(),b(" ",t.project_name," ")}}function Fe(c,f){if(c&1&&(i(0,"div")(1,"p",57),r(2,"Xem \u1EA3nh update:"),o(),h(3,"img",58),o()),c&2){let t=p(2);m(3),u("src",t.previewImage,E)}}function Le(c,f){c&1&&(U(0),i(1,"p",59),r(2,"\u1EA2nh \u0111ang \u0111\u01B0\u1EE3c t\u1EA3i..."),o(),k())}function De(c,f){if(c&1){let t=S();i(0,"img",60),g("click",function(){a(t);let e=p().$implicit,l=p();return s(l.showUpdateImage(e,2))})("load",function(){a(t);let e=p(2);return s(e.onImageLoad())})("error",function(e){a(t);let l=p(2);return s(l.replaceWithDefaultImage(e))}),o()}if(c&2){let t=p().$implicit;u("src",t.image_face_2,E)}}function Re(c,f){if(c&1&&(i(0,"div")(1,"p",57),r(2,"Xem \u1EA3nh 2 update:"),o(),h(3,"img",58),o()),c&2){let t=p(2);m(3),u("src",t.previewImage2,E)}}function Be(c,f){if(c&1){let t=S();i(0,"tr")(1,"td",38),r(2),o(),i(3,"td",38)(4,"span",31),r(5),o(),r(6),o(),i(7,"td",38)(8,"div",39)(9,"div",40)(10,"img",41),g("click",function(){let e=a(t).$implicit,l=p();return s(l.showUpdateImage(e,1))})("error",function(e){a(t);let l=p();return s(l.replaceWithDefaultImage(e))}),o(),i(11,"span",42),r(12,"Xem v\xE0 update \u1EA3nh nh\xE2n vi\xEAn"),o()(),i(13,"c-modal",43),I("visibleChange",function(e){a(t);let l=p();return w(l.isUpdateImg,e)||(l.isUpdateImg=e),s(e)}),i(14,"c-modal-header")(15,"h5",44),r(16,"Update Image"),o(),i(17,"button",45),g("click",function(){a(t);let e=p();return s(e.resetImgUpdate())}),o()(),i(18,"c-modal-body")(19,"div",46)(20,"div")(21,"div",47)(22,"p",31),r(23,"Th\xF4ng tin nh\xE2n vi\xEAn: "),o(),i(24,"p"),r(25),o(),i(26,"p"),r(27),o()(),i(28,"div",48)(29,"div",49)(30,"label",31),r(31,"Image"),o(),h(32,"img",50),o()()(),i(33,"div")(34,"div")(35,"div",31),r(36,"Update \u1EA3nh nh\xE2n vi\xEAn"),o()(),i(37,"p",51),r(38,"Ch\u1ECDn \u1EA3nh update: "),o(),i(39,"input",52),g("change",function(e){a(t);let l=p();return s(l.onFileSelected(e,1))}),o(),C(40,Fe,4,1,"div",53),i(41,"button",54),g("click",function(){a(t);let e=p();return s(e.resetImgUpdate())}),r(42,"Cancel"),o(),i(43,"button",55),g("click",function(){a(t);let e=p();return s(e.updateImage(1))}),r(44,"Update Image"),o()()()()()()(),i(45,"td",38)(46,"div",39)(47,"div",40),C(48,Le,3,0,"ng-container",56)(49,De,1,1,"ng-template",null,1,W),i(51,"span",42),r(52,"Xem v\xE0 update \u1EA3nh face 2 nh\xE2n vi\xEAn "),o()(),i(53,"c-modal",43),I("visibleChange",function(e){a(t);let l=p();return w(l.isUpdateImg_2,e)||(l.isUpdateImg_2=e),s(e)}),i(54,"c-modal-header")(55,"h5",44),r(56,"Update Image"),o(),i(57,"button",45),g("click",function(){a(t);let e=p();return s(e.resetImgUpdate())}),o()(),i(58,"c-modal-body")(59,"div",46)(60,"div")(61,"div",47)(62,"p",31),r(63,"Th\xF4ng tin nh\xE2n vi\xEAn: "),o(),i(64,"p"),r(65),o(),i(66,"p"),r(67),o()(),i(68,"div",48)(69,"div",49)(70,"label",31),r(71,"Image Face 2"),o(),h(72,"img",50),o()()(),i(73,"div")(74,"div")(75,"div",31),r(76,"Update \u1EA3nh nh\xE2n vi\xEAn"),o()(),i(77,"p",51),r(78,"Ch\u1ECDn \u1EA3nh 2 update: "),o(),i(79,"input",52),g("change",function(e){a(t);let l=p();return s(l.onFileSelected(e,2))}),o(),C(80,Re,4,1,"div",53),i(81,"button",54),g("click",function(){a(t);let e=p();return s(e.resetImgUpdate())}),r(82,"Cancel"),o(),i(83,"button",55),g("click",function(){a(t);let e=p();return s(e.updateImage(2))}),r(84,"Update Image"),o()()()()()()()()}if(c&2){let t=f.$implicit,n=D(50),e=p();m(2),b(" ",t.RowNumber," "),m(3),R(t.employee_code),m(),b(" - ",t.employee_name," "),m(4),u("src",t.image,E),m(3),y("visible",e.isUpdateImg),m(12),b("Code: ",e.oldEmpCode,""),m(2),b("Name: ",e.oldEmpName,""),m(5),u("src",e.oldImgUrl,E),m(8),u("ngIf",e.previewImage),m(8),u("ngIf",e.loadingImg)("ngIfElse",n),m(5),y("visible",e.isUpdateImg_2),m(12),b("Code: ",e.oldEmpCode,""),m(2),b("Name: ",e.oldEmpName,""),m(5),u("src",e.oldImgUrl_2,E),m(8),u("ngIf",e.previewImage2)}}var tt=(()=>{class c{constructor(t,n){this.employeeATD=t,this.iconSet=n,this.employeesOption=[],this.employeeProfiles=[],this.employee_code="",this.projectIds=[{project_id:55,project_name:"attendance AI",selected:!1},{project_id:44,project_name:"Abbott",selected:!0}],this.selectedProject=null,this.projectIdRq=44,this.isUpdateImg=!1,this.isUpdateImg_2=!1,this.newImageUrl_2="",this.qc_id=9997,this.isLoading=!1,this.loadingImg=!0,this.currentPage=1,this.rowPerPageRq=0,this.pageNumberRq=0,this.totalRecords=0,this.rows=20,this.totalPages=0,this.showImportDialog=!1,this.dataColumnError=[],this.oldEmpCode="",this.oldEmpName="",this.oldImgUrl="",this.oldImgUrl_2="",this.newImageUrl=null,this.previewImage=null,this.newImageUrl2=null,this.previewImage2=null,n.icons={cilFilter:ve,cilArrowThickBottom:we,cilArrowThickFromBottom:Ie,cilColorBorder:Ce,cilXCircle:xe}}ngOnInit(){console.log("call api get List employee"),this.loadEmployee(1),console.log("Project_Ids:"),console.log(this.projectIds),console.log(this.projectIdRq)}selectProjectId(){console.log(this.selectedProject),this.projectIdRq=this.selectedProject}filterEmployee(){this.loadEmployee(1),this.employee_code==""&&(this.currentPage=1)}calculateTotalPages(t,n=20){return Math.ceil(t/n)}replaceWithDefaultImage(t){t.target.src="https://png.pngtree.com/png-clipart/20190925/original/pngtree-no-avatar-vector-isolated-on-white-background-png-image_4979074.jpg",this.loadingImg=!1}onImageLoad(){console.log("Load anh thanh cong"),this.loadingImg=!1}onPageChange(t){console.log(t),this.currentPage=t,console.log("Page hien tai:",this.currentPage),this.loadEmployee(this.currentPage)}loadEmployee(t){this.currentPage=t,this.isLoading=!0,this.rowPerPageRq=this.rows,this.pageNumberRq=t,console.log("Data Filter Employee"),console.log(this.projectIdRq),this.projectIdRq!==void 0&&this.projectIdRq!==null&&(console.log("Co chon project_id tr\xEAn select"),this.isLoading=!0,console.log(this.projectIdRq),this.employeeATD.GetListEmployeeAbbott(this.projectIdRq,this.qc_id,this.pageNumberRq,this.rowPerPageRq,this.employee_code).subscribe(n=>{(n.result=H.ok)&&(this.isLoading=!1,this.employeeProfiles=n?.data,console.log(n?.data),n?.data.length==0&&(this.totalRecords=0),this.totalRecords=n.data[0].TotalRows,this.totalPages=this.calculateTotalPages(this.totalRecords,this.rows),console.log(this.employeeProfiles))},n=>{this.isLoading=!1,console.log(n)}))}resetInput(){this.employee_code="",this.loadEmployee(1)}exportEmployeesAbbott(){this.isLoading=!0,console.log("Export Abbott"),this.employeeATD.exportEmployee(44,this.qc_id).subscribe(t=>{this.isLoading=!1;let n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.presentationml.presentation"});(0,Pe.saveAs)(n,"EmployeesAbbott-44.xlsx")},t=>{this.isLoading=!1,console.log("Error downloading file",t)})}showImportTemplate(){this.showImportDialog=!0}importFileEmployeePPT(){console.log("Import File Employee")}clearDataImport(){this.dataColumnError=void 0,this.dataRowError=void 0}onChange(t){this.clearDataImport(),this.file=t.target.files[0],console.log("Khong co file: "),console.log(this.file)}updateImage(t){console.log("updatImage"),t==1?(console.log("Call api update Image Emloyee"),console.log("Gui anh len server..."),console.log(this.newImageUrl)):(console.log("Call api Update Image Face 2"),console.log("Gui anh len server..."),console.log(this.newImageUrl2))}showUpdateImage(t,n){console.log(t),this.oldEmpCode=t.employee_code,this.oldEmpName=t.employee_name,this.oldImgUrl=t.image,this.oldImgUrl_2=t.image_face_2,n==1?this.isUpdateImg=!0:this.isUpdateImg_2=!0,console.log(this.isUpdateImg)}clearFileInput(){this.myInputFile.nativeElement.value=null,this.file=void 0}onFileSelected(t,n){let e=t.target.files?.[0];if(e){let l=new FileReader;console.log("Anh moi la:",l.result),n==1?l.onload=()=>{this.previewImage=l.result,this.newImageUrl=l.result}:l.onload=()=>{this.previewImage2=l.result,this.newImageUrl2=l.result},l.readAsDataURL(e)}}resetImgUpdate(){this.isUpdateImg=!1,this.isUpdateImg_2=!1,this.newImageUrl=null,this.previewImage=null,this.newImageUrl2=null,this.previewImage2=null}static{this.\u0275fac=function(n){return new(n||c)(P(Ae),P(A))}}static{this.\u0275cmp=M({type:c,selectors:[["app-employee-abbott"]],viewQuery:function(n,e){if(n&1&&j(ke,5),n&2){let l;F(l=L())&&(e.myInputFile=l.first)}},features:[B([A])],decls:65,vars:11,consts:[["myInputFile",""],["showImage",""],[1,"card","mb-3"],[1,"card-body"],[1,"row"],[1,"col-md-4"],[1,"form-label","fw-bold"],[1,"input-group"],["type","text","placeholder","Please fill Employee Code",1,"form-control",3,"ngModelChange","ngModel"],["cButton","","color","warning",3,"click"],[1,"d-flex","align-items-center","gap-1"],["cIcon","","name","cilXCircle","size","sm"],[3,"ngModelChange","valueChange","ngModel","disabled"],[3,"value","selected",4,"ngFor","ngForOf"],["size","lg","backdrop","static","keyboard","false",1,"d-flex","align-items-center","justify-content-center",3,"visibleChange","visible"],[1,"text-center"],["color","primary",1,"mb-3"],[1,"flex-container"],["cButton","","color","primary",1,"button-card",3,"click"],["cIcon","","name","cilFilter","size","sm"],[1,"d-inline-block"],["color","success","cButton","",1,"button-card",3,"click"],["cIcon","","name","cilArrowThickBottom","size","sm"],["cButton","","color","success",1,"button-card",3,"click"],["cIcon","","name","cilArrowThickFromBottom","size","sm"],[3,"visibleChange","visible"],[1,"file-input-container"],["type","file",1,"form-control","btn-info",3,"change"],["cButton","","color","success",1,"mt-3",3,"click"],["name","cil-cloud-upload"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"fw-bold"],["cTable","","color","white",3,"striped"],["scope","col",2,"width","20px"],["scope","col",2,"width","300px"],[4,"ngFor","ngForOf"],["align","center",3,"activePageChange","activePage","pages"],[3,"value","selected"],[2,"text-align","center","vertical-align","middle"],[1,"d-flex","align-items-center","justify-content-center","gap-2","tooltip-container"],[1,"tooltip-container"],["width","200","height","250",1,"rounded","shadow-sm","tooltip-trigger",2,"cursor","pointer",3,"click","error","src"],[1,"custom-tooltip"],["backdrop","static",3,"visibleChange","visible"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"d-flex","justify-content-between"],[1,"mb-3","text-start"],[1,"d-flex","justify-content-center","gap-3"],[1,"text-center","d-flex","flex-column","align-items-center"],[1,"img-thumbnail","mt-2",2,"width","300px","height","350px","object-fit","cover","cursor","pointer",3,"src"],[1,"mt-3","text-start"],["type","file","accept",".jpg, .png",1,"form-control","mb-2","mt-3",3,"change"],[4,"ngIf"],["cButton","","color","secondary",3,"click"],["cButton","","color","success",3,"click"],[4,"ngIf","ngIfElse"],[1,"mt-2"],[1,"img-thumbnail",2,"width","200px","height","200px","object-fit","cover",3,"src"],[1,"loading-text"],["width","200","height","250",1,"rounded","shadow-sm","tooltip-trigger",2,"cursor","pointer",3,"click","load","error","src"]],template:function(n,e){if(n&1){let l=S();i(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"label",6),r(5,"Employee Code"),o(),i(6,"div",7)(7,"input",8),I("ngModelChange",function(d){return a(l),w(e.employee_code,d)||(e.employee_code=d),s(d)}),o(),i(8,"button",9),g("click",function(){return a(l),s(e.resetInput())}),i(9,"span",10),v(),h(10,"svg",11),r(11," Reset "),o()()()(),x(),i(12,"div",5)(13,"label",6),r(14,"Project ID"),o(),i(15,"c-multi-select",12),I("ngModelChange",function(d){return a(l),w(e.selectedProject,d)||(e.selectedProject=d),s(d)}),g("valueChange",function(){return a(l),s(e.selectProjectId())}),C(16,je,2,3,"c-multi-select-option",13),o()()()()(),i(17,"c-modal",14),I("visibleChange",function(d){return a(l),w(e.isLoading,d)||(e.isLoading=d),s(d)}),i(18,"c-modal-body",15),h(19,"c-spinner",16),i(20,"p"),r(21,"Loading, please wait..."),o()()(),i(22,"div",2)(23,"div",3)(24,"div",17)(25,"button",18),g("click",function(){return a(l),s(e.filterEmployee())}),v(),h(26,"svg",19),r(27," Filter "),o(),x(),i(28,"div",20)(29,"button",21),g("click",function(){return a(l),s(e.exportEmployeesAbbott())}),v(),h(30,"svg",22),r(31," Export Employees "),o()(),x(),i(32,"button",23),g("click",function(){return a(l),s(e.showImportTemplate())}),v(),h(33,"svg",24),r(34," Import Employees "),o()()(),x(),i(35,"c-modal",25),I("visibleChange",function(d){return a(l),w(e.showImportDialog,d)||(e.showImportDialog=d),s(d)}),i(36,"c-modal-header"),r(37," Import File EmployeePPT "),o(),i(38,"c-modal-body")(39,"div",26)(40,"input",27,0),g("change",function(d){return a(l),s(e.onChange(d))}),o()()(),i(42,"c-modal-footer")(43,"button",28),g("click",function(){return a(l),s(e.importFileEmployeePPT())}),h(44,"c-icon",29),r(45," Import File "),o()()()(),i(46,"div",2)(47,"div",3)(48,"div",30)(49,"span",31),r(50),o()(),i(51,"table",32)(52,"thead")(53,"tr")(54,"th",33),r(55,"#"),o(),i(56,"th",34),r(57,"Employee"),o(),i(58,"th",34),r(59,"Image"),o(),i(60,"th",34),r(61,"Image Face 2"),o()()(),i(62,"tbody"),C(63,Be,85,16,"tr",35),o()(),i(64,"c-smart-pagination",36),g("activePageChange",function(d){return a(l),s(e.onPageChange(d))}),o()()()}n&2&&(m(7),y("ngModel",e.employee_code),m(8),y("ngModel",e.selectedProject),u("disabled",!0),m(),u("ngForOf",e.projectIds),m(),y("visible",e.isLoading),m(18),y("visible",e.showImportDialog),m(15),b("Total Items: ",e.totalRecords,""),m(),u("striped",!0),m(12),u("ngForOf",e.employeeProfiles),m(),u("activePage",e.currentPage)("pages",e.totalPages))},dependencies:[ye,be,he,ie,N,O,q,oe,J,X,Q,K,Ee,fe,_e,te,ee,$,Z,Y,me,se,ae,ue,ce,ge,pe,de,re,le,ne],styles:['@charset "UTF-8";.button-card[_ngcontent-%COMP%]{margin-right:20px}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:4px;text-align:center}.tooltip-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.custom-tooltip[_ngcontent-%COMP%]{visibility:hidden;background-color:#000;color:#fff;text-align:center;padding:5px 10px;border-radius:5px;position:absolute;bottom:60%;left:50%;transform:translate(-50%);white-space:nowrap;opacity:0;transition:opacity .3s}.tooltip-container[_ngcontent-%COMP%]:hover   .custom-tooltip[_ngcontent-%COMP%]{visibility:visible;opacity:1}.loading-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:14px;font-weight:700;color:gray}']})}}return c})();export{tt as EmployeeAbbottComponent};
