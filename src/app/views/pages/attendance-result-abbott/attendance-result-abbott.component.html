<c-card class="mt-1 mb-1">
  <c-row class="p-2">
    <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Từ ngày</h6>
      </span>
      <c-date-picker inputReadOnly [(ngModel)]="fromDate" [inputDateFormat]="formatDate" #datePicker="cDatePicker" />
    </c-col>
    <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Đến ngày</h6>
      </span>
      <c-date-picker inputReadOnly [(ngModel)]="toDate" [inputDateFormat]="formatDate" #datePicker="cDatePicker" />
    </c-col>

    <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Mã báo cáo</h6>
      </span>
      <c-input-group class="input-prepend">
        <input cFormControl placeholder="Nhập mã báo cáo" type="text" [(ngModel)]="id_BC" />
      </c-input-group>
    </c-col>

    <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Nhân Viên</h6>
      </span>
      <c-input-group class="input-prepend">
        <input cFormControl placeholder="Nhập mã nhân viên" type="text" [(ngModel)]="emp_code" />
      </c-input-group>
    </c-col>

    <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Cửa hàng</h6>
      </span>
      <c-input-group class="input-prepend">
        <input cFormControl placeholder="Nhập mã cửa hàng" type="text" [(ngModel)]="shop_code" />
      </c-input-group>
    </c-col>

    <!-- <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Kết quả AI</h6>
      </span>
      <div style="display: flex; gap:10px">
        <select style="width:100%; padding:6px 12px; border: 1px solid #dbdfe6" cSelect [(ngModel)]="kqai">
          <option value="">Tất cả</option>
          <option value="-0">1 - Chưa có KQ CI AI</option>
          <option value="-2">2 - Chưa có KQ CO AI</option>
          <option value="checkin-true">3 - AI Check-in - True</option>
          <option value="checkin-false">4 - AI Check-in - False</option>
          <option value="checkout-true">5 - AI Check-out - True</option>
          <option value="checkout-false">6 - AI Check-out - False</option>
        </select>
      </div>
    </c-col> -->
    <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Kết quả AI</h6>
      </span>
      <div style="display: flex; gap:10px">
        <select style="width:100%; padding:6px 12px; border: 1px solid #dbdfe6" cSelect [(ngModel)]="kqai">
          <option value=-1>Tất cả</option>
          <option value=0>1 - Chưa có KQ CI AI</option>
          <option value=1>2 - Chưa có KQ CO AI</option>
          <option value=2>3 - AI Check-in - True</option>
          <option value=3>4 - AI Check-in - False</option>
          <option value=4>5 - AI Check-out - True</option>
          <option value=5>6 - AI Check-out - False</option>
        </select>
      </div>
    </c-col>

    <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Kết quả QC</h6>
      </span>
      <div style="display: flex; gap:10px">
        <select style="width:100%; padding:6px 12px; border: 1px solid #dbdfe6" cSelect [(ngModel)]="kqqc">
          <option value=-1>Tất cả</option>
          <option value=0>1 - Chưa có KQ CI QC</option>
          <option value=1>2 - Chưa có KQ CO QC</option>
          <option value=2>3 - QC Check-in - True</option>
          <option value=3>4 - QC Check-in - False</option>
          <option value=4>5 - QC Check-out - True</option>
          <option value=5>6 - QC Check-out - False</option>
        </select>
      </div>
    </c-col>

    <!-- <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Kết quả QC</h6>
      </span>
      <div style="display: flex; gap:10px">
        <select style="width:100%; padding:6px 12px; border: 1px solid #dbdfe6" cSelect [(ngModel)]="kqqc">
          <option value="">Tất cả</option>
          <option value="-1">1 - Chưa có KQ CI QC</option>
          <option value="-3">2 - Chưa có KQ CO QC</option>
          <option value="checkin-true">3 - QC Check-in - True</option>
          <option value="checkin-false">4 - QC Check-in - False</option>
          <option value="checkout-true">5 - QC Check-out - True</option>
          <option value="checkout-false">6 - QC Check-out - False</option>
        </select>
      </div>
    </c-col> -->

    <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Trạng thái</h6>
      </span>
      <div class="">
        <select style="width:100%; padding:6px 12px; border: 1px solid #dbdfe6" cSelect [(ngModel)]="qc_lock">
          <option value="-1">Tất cả</option>
          <option value="0">Chưa khoá</option>
          <option value="1">Đã khoá</option>
        </select>
      </div>
    </c-col>

    <c-col md="3">
      <span class="clearfix">
        <h6 class="pt-3">Guild ID</h6>
      </span>
      <c-input-group class="input-prepend">
        <input cFormControl placeholder="Nhập mã guild id" type="text" [(ngModel)]="guild_id" />
      </c-input-group>
    </c-col>

    <c-row class="p-2">
      <div style="display: flex; gap:5px">
        <button cButton color="primary" (click)="filter(1)"> <svg cIcon name="cilSearch"></svg> Tìm
          kiếm</button>
        <button cButton color="primary" (click)="export()"> <svg cIcon name="cilDataTransferDown"></svg>
          Export</button>
        <button cButton color="primary" (click)="showImportFile = !showImportFile" *ngIf="isSup"> <svg cIcon
            name="cilLevelUp"></svg>
          Khóa ATD</button>
      </div>

      <div *ngIf="showImportFile" class="my-2">
        <div style="display: flex; align-items: center; gap:5px; width: 700px;">
          <p class="m-0">Lock: </p>
          <input cFormControl id="formFileImport" type="file" (change)="onFileChange($event,'lock')" />
          <button cButton color="primary" (click)="importFileLock('lock')">
            Submit</button>
          <button cButton color="primary" (click)="getTemplate('lock')" style="min-width: 150px;">
            <svg cIcon name="cilPaperclip"></svg>
            Get Teamplate
          </button>
        </div>

        <div style="display: flex; align-items: center; gap:5px; width: 700px; margin-top: 10px;">
          <p class="m-0">Unlock: </p>
          <input cFormControl id="formFileImportUnlock" type="file" (change)="onFileChange($event,'unlock')" />
          <button cButton color="primary" (click)="importFileLock('unlock')">
            Submit</button>
          <button cButton color="primary" (click)="getTemplate('unlock')" style="min-width: 150px;">
            <svg cIcon name="cilPaperclip"></svg>
            Get Teamplate
          </button>
        </div>

      </div>
    </c-row>
  </c-row>
</c-card>

<div class="fade show" *ngIf="this.isLoading"
  style="text-align: center; height: 20vh ; padding-top:calc(20vh / 2); background-color: white;">
  <i class="spinner-grow spinner-grow-sm text-success"></i>
  <span class="m-1 text-success">Đang load dữ liệu</span>
</div>

<c-toast [autohide]="true" [delay]="2000" [visible]="toast.visible_toast"
  style="position:fixed; top:80px ; right:0 ; background-color:cornflowerblue; color:white; z-index: 1000;">
  <c-toast-header>
    <strong class="mr-auto">Thông báo</strong>
  </c-toast-header>
  <c-toast-body class="{{ toast.background }}">
    {{ toast.message_toast }}
  </c-toast-body>
</c-toast>

<span *ngIf="!isLoading && listAttendance?.length > 0">
  Total: {{listAttendance[listAttendance.length - 1].RowNumber}} / {{ listAttendance[0]?.TotalRows || "0" }}
</span>

<table class="table" style="table-layout: fixed; width: 100%;" *ngIf="listAttendance && !this.isLoading">
  <thead>
    <tr style="text-align: center;">
      <!-- <th style="width: 60px;">#</th> -->
      <th style="width: 80px;">Mã BC</th>
      <th style="width: 90px;">Guild ID</th>
      <th>Nhân viên</th>
      <th>KQ CI AI</th>
      <th>KQ CI QC</th>
      <th>Trạng thái QC CI</th>
      <th>KQ CO AI</th>
      <th>KQ CO QC</th>
      <th>Trạng thái QC CO</th>
      <th>Cửa hàng</th>
      <th>Ngày làm việc</th>
      <th>Tên QC</th>
      <th>Trạng thái</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngIf="listAttendance.length === 0">
      <tr>
        <td colspan="13" class="text-center p-5">Chưa có dữ liệu</td>
      </tr>
    </ng-container>
    <ng-container *ngFor="let item of listAttendance; let i = index">
      <tr>
        <!-- <td style="text-align: center;">
          <button (click)="toggleRow(i)" cButton color="primary">
            {{ expandedRows[i] ? '-' : '+' }}
          </button>

          <c-form-check style="font-size: 25px;">
            <input cFormCheckInput type="checkbox" value="true" [name]="'flexRadioCheck' + i"
              [(ngModel)]="final_result[i]" style="width: 25px; height: 25px;" />
          </c-form-check>
        </td> -->
        <td>{{ item.id }}</td>
        <td>{{ item.guid_code }}</td>
        <td>{{ item.att_code }} - {{ item.emp_name }}</td>
        <td>CI AI:
          <span [ngClass]="{'text-danger': item.ci_result == 'false'}">
            {{ item.ci_result == 'false' ? "False" : (item.ci_result == 'true' ? "True": "")}}

            <svg *ngIf="item.ci_result == 'true'" style="color:green" cIcon name="cilCheckCircle"></svg>
            <svg *ngIf="item.ci_result == 'false'" style="color:red" cIcon name="cilXCircle"></svg>
          </span>
          <div *ngIf="item.ci_result">
            <p [ngClass]="{'text-danger': item.ci_FaceVerifyAiOk === '0'}" class="m-0">
              FaceID:
              {{ item.ci_FaceVerifyAiOk == '1' ? 'True' : (item.ci_FaceVerifyAiOk == '0' ? 'False' : "")}}
            </p>
            <p [ngClass]="{'text-danger': item.ci_LocationAiOk == '0'}" class="m-0">
              Location:
              {{ item.ci_LocationAiOk == '1' ? 'True' : (item.ci_LocationAiOk == '0' ? 'False' : "")}}
            </p>
            <p [ngClass]="{'text-danger': item.ci_brandAiOk === '0'}" class="m-0">
              Logo: {{ item.ci_brandAiOk == '1' ? 'True' : (item.ci_brandAiOk == '0' ? 'False' : "")}}
            </p>
          </div>

          <svg *ngIf="!item.ci_result" cIcon name="cilWindowMinimize"></svg>
        </td>
        <td>
          <!-- CI QC: -->
          <!-- <span [ngClass]="{'text-danger': item.ci_final_result === 'false'}">
            {{ item.ci_final_result }}
          </span> -->

          <!-- <svg *ngIf="item.ci_final_result == 'true'" style="color:green" cIcon name="cilCheckCircle"></svg>
          <svg *ngIf="item.ci_final_result == 'false'" style="color:red" cIcon name="cilXCircle"></svg>
          <svg *ngIf="!item.ci_final_result" cIcon name="cilWindowMinimize"></svg> -->

          <div>
            <p [ngClass]="{'text-danger': item.ci_FaceVerifyOk == '0'}" class="m-0">
              FaceID:
              {{ item.ci_FaceVerifyOk == '1' ? 'True' : (item.ci_FaceVerifyOk == '0' ? 'False' : "")}}
            </p>
            <p [ngClass]="{'text-danger': item.ci_LocationOk == '0'}" class="m-0">
              Location:
              {{ item.ci_LocationOk == '1' ? 'True' : (item.ci_LocationOk == '0' ? 'False' : "")}}
            </p>
            <p [ngClass]="{'text-danger': item.ci_brandOk == '0'}" class="m-0">
              Logo: {{ item.ci_brandOk == '1' ? 'True' : (item.ci_brandOk == '0' ? 'False' : "")}}
            </p>
          </div>
        </td>
        <td>
          {{
          item.ci_final_result == 'True' ? 'Đạt' :
          item.ci_final_result == 'true' ? 'Đạt' :
          item.ci_final_result === 'wrong_unifrom' ? 'Không đạt đồng phục' :
          item.ci_final_result === 'unidentified' ? 'Không xác định' :
          item.ci_fail_reason ? 'Không đạt: ' + item.ci_fail_reason :
          ''
          }}

          {{ item.ci_reason_id == 1 ? ": " + item.ci_note : "" }}
        </td>
        <td>CO AI:
          <span [ngClass]="{'text-danger': item.co_result === 'false'}">
            {{ item.co_result == 'false' ? "False" : (item.co_result == 'true' ? "True": "")}}
          </span>
          <svg *ngIf="item.co_result == 'true'" style="color:green" cIcon name="cilCheckCircle"></svg>
          <svg *ngIf="item.co_result == 'false'" style="color:red" cIcon name="cilXCircle"></svg>

          <div *ngIf="item.co_result">

            <p [ngClass]="{'text-danger': item.co_FaceVerifyAiOk === '0'}" class="m-0">
              FaceID:
              {{ item.co_FaceVerifyAiOk == '1' ? 'True' : (item.co_FaceVerifyAiOk == '0' ? 'False' : "")}}
            </p>
            <p [ngClass]="{'text-danger': item.co_LocationAiOk == '0'}" class="m-0">
              Location:
              {{ item.co_LocationAiOk == '1' ? 'True' : (item.co_LocationAiOk == '0' ? 'False' : "")}}
            </p>
            <p [ngClass]="{'text-danger': item.co_brandAiOk == '0'}" class="m-0">
              Logo: {{ item.co_brandAiOk == '1' ? 'True' : (item.co_brandAiOk == '0' ? 'False' : "")}}
            </p>
          </div>

          <svg *ngIf="!item.co_result" cIcon name="cilWindowMinimize"></svg>
        </td>
        <td>
          <!-- <span [ngClass]="{'text-danger': item.co_final_result === 'false'}">
            {{ item.co_final_result }}
          </span>

          <svg *ngIf="item.co_final_result == 'true'" style="color:green" cIcon name="cilCheckCircle"></svg>
          <svg *ngIf="item.co_final_result == 'false'" style="color:red" cIcon name="cilXCircle"></svg>
          <svg *ngIf="!item.co_final_result" cIcon name="cilWindowMinimize"></svg> -->

          <div>
            <p [ngClass]="{'text-danger': item.co_FaceVerifyOk == '0'}" class="m-0">
              FaceID:
              {{ item.co_FaceVerifyOk == '1' ? 'True' : (item.co_FaceVerifyOk == '0' ? 'False' : "")}}
            </p>
            <p [ngClass]="{'text-danger': item.co_LocationOk == '0'}" class="m-0">
              Location:
              {{ item.co_LocationOk == '1' ? 'True' : (item.co_LocationOk == '0' ? 'False' : "")}}
            </p>
            <p [ngClass]="{'text-danger': item.co_brandOk == '0'}" class="m-0">
              Logo: {{ item.co_brandOk == '1' ? 'True' : (item.co_brandOk == '0' ? 'False' : "")}}
            </p>
          </div>
        </td>
        <td>
          <!-- {{item.co_fail_reason === 'true' ? "Đạt" : (item.co_fail_reason ? "Không đạt: " + item.co_fail_reason : "")}} -->
          {{
          item.co_final_result === 'true' ? 'Đạt' :
          item.co_final_result === 'True' ? 'Đạt' :
          item.co_final_result === 'wrong_unifrom' ? 'Không đạt đồng phục' :
          item.co_final_result === 'unidentified' ? 'Không xác định' :
          item.co_fail_reason ? 'Không đạt: ' + item.co_fail_reason :
          ''
          }}

          {{ item.co_reason_id == 1 ? ": " + item.co_note : "" }}
        </td>
        <!-- <td>{{ item.shop_code }} - {{ item.shop_name }}</td> -->
        <td [style.color]="list_shop.includes(item.shop_code) ? color_font_shopcode : '#000000'">
          {{ item.shop_code }} - {{ item.shop_name }}
        </td>
        <td>{{ item.work_date }}</td>
        <td>{{ item.employee_name }} - {{ item.qc_date | date: 'dd/MM/yyyy HH:mm' }}</td>
        <td>
          <div style="cursor: pointer" [ngStyle]="{ color: item.qc_lock == 1 ? 'red' : 'black' }"
            (click)="openConfirmModal(item)">
            <svg *ngIf="item.qc_lock == 1" cIcon name="cilLockLocked"></svg>
            <svg *ngIf="item.qc_lock == 0 || item.qc_lock == null " cIcon name="cilLockUnlocked"></svg>
            {{ item.qc_lock == 1 ? 'Đã khoá' : 'Chưa khoá' }}
          </div>
        </td>
      </tr>

      <tr>
        <td colspan="13">
          <div style="display:flex; gap:10px">
            <div style="padding: 15px 50px; text-align: center;">
              <label for="" style="width: 100%;font-weight: bold; ">Hình Profile</label>
              <p>-------</p>

              <div class="w-full">
                <button *ngIf="item.qc_lock !== 1" class="my-2" cButton color="primary"
                  (click)="confirmUpdateImage(item,i)">
                  <svg cIcon name="cilSettings"></svg>
                </button>
              </div>

              <div class="">
                <img *ngIf="item.image" [src]="item.image" alt="img" width="250" height="250"
                  (click)="showImagePopup(item.image ? item.image : '../../../../assets/images/avatars/default-avatar.jpg')">

                <img *ngIf="!item.image" src="../../../../assets/images/avatars/default-avatar.jpg" alt="" width="250"
                  height="250">
              </div>
            </div>

            <div class="checkin-container">
              <label for="" style="width: 100%;">Check-in</label>
              <p *ngIf="item.ci_time">{{ item.ci_time | date: 'dd/MM/yyyy HH:mm:ss' }}</p>
              <p *ngIf="!item.ci_time">--/--/---</p>

              <div class="my-2 d-flex gap-2 justify-content-end" *ngIf="item.qc_lock !== 1">

                <div class="spinner-border text-primary" role="status" *ngIf="loadding_detect_ci">
                  <span class="visually-hidden">Loading...</span>
                </div>

                <button cButton color="primary" *ngIf="item.image && item.ci_photo"
                  (click)="handleDetectAI(i,item,'checkin')">
                  <svg cIcon name="cilCheckCircle"></svg> Detect
                </button>

                <button cButton color="primary" (click)="confirmChangeImage(item,i,'checkin')">
                  <svg cIcon name="cilSettings"></svg>
                </button>
              </div>

              <img *ngIf="item.ci_photo" [src]="item.ci_photo" alt="img-check-out" width="250" height="250"
                (click)="showImagePopup(item.ci_photo ? item.ci_photo : '../../../../assets/images/avatars/default-avatar.jpg')">

              <img *ngIf="!item.ci_photo" src="../../../../assets/images/avatars/default-avatar.jpg" alt="" width="250"
                height="250">

              <div *ngIf="item.ci_photo">
                <div style="padding: 15px;">
                  <h4 style="margin: 0 0 10px; text-align: center; font-size: 16px; font-weight: bold; color: #333;">
                    AI Detect Result
                  </h4>

                  <div style="display: flex; flex-direction: column; gap: 10px;">
                    <label style="display: flex; justify-content: space-between; align-items: center;">
                      <span>Face ID:</span>

                      <div class="">
                        <span>
                          {{ item.ci_FaceVerifyAiOk == '1' ? 'True' : (item.ci_FaceVerifyAiOk == '0' ? 'False' :"__")}}
                        </span>
                        <select cSelect [(ngModel)]="item.ci_FaceVerifyOk"
                           [disabled]="item.qc_lock === 1"
                          style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                          <option [value]="1">Đúng</option>
                          <option [value]="0">Sai</option>
                          <option [value]="null">---</option>
                        </select>
                      </div>

                    </label>

                    <label style="display: flex; justify-content: space-between; align-items: center;">
                      <span>Location:</span>

                      <div class="">
                        <span>
                          {{ item.ci_LocationAiOk == '1' ? 'True' : (item.ci_LocationAiOk == '0' ? 'False' :
                          "__")}}
                        </span>
<!-- (ngModelChange)="onChangSwitch($event, item,'location','checkin')" -->
                        <select cSelect [(ngModel)]="item.ci_LocationOk" 
                           [disabled]="item.qc_lock === 1"
                          style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                          <option [value]="1">Đúng</option>
                          <option [value]="0">Sai</option>
                          <option [value]="null">---</option>
                        </select>
                      </div>
                    </label>

                    <label style="display: flex; justify-content: space-between; align-items: center;">
                      <span>Logo:</span>
                      <div>
                        <span>
                          {{ item.ci_brandAiOk == '1' ? 'True' : (item.ci_brandAiOk == '0' ? 'False' : "__")}}
                        </span>
                        <select cSelect [(ngModel)]="item.ci_brandOk" 
                          [disabled]="item.qc_lock === 1"
                          style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                          <option [value]="1">Đúng</option>
                          <option [value]="0">Sai</option>
                          <option [value]="null">---</option>
                        </select>
                      </div>
                    </label>
                  </div>
                </div>

                <div class="form-container">
                  <div class="radio-group-container" style="display: grid; gap: 10px; max-width: 500px; margin: auto;">
                    <div class="radio-row" style="display: flex; justify-content: space-between; gap: 10px;">
                      <c-form-check
                        style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                        <input cFormCheckInput type="radio" value="true" [name]="'flexRadioCheck' + i"
                          [disabled]="item.qc_lock === 1" [(ngModel)]="final_result[i]" />
                        <label cFormCheckLabel>Đạt</label>
                      </c-form-check>

                      <c-form-check
                        style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                        <input cFormCheckInput type="radio" value="false" [name]="'flexRadioCheck' + i"
                          [disabled]="item.qc_lock === 1" [(ngModel)]="final_result[i]" />
                        <label cFormCheckLabel>Không đạt</label>
                      </c-form-check>
                    </div>

                    <div class="radio-row" style="display: flex; justify-content: space-between; gap: 10px;">
                      <c-form-check
                        style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                        <input cFormCheckInput type="radio" value="unidentified" [name]="'flexRadioCheck' + i"
                          [disabled]="item.qc_lock === 1" [(ngModel)]="final_result[i]" />
                        <label cFormCheckLabel>Không xác định</label>
                      </c-form-check>

                      <c-form-check
                        style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                        <input cFormCheckInput type="radio" value="wrong_unifrom" [name]="'flexRadioCheck' + i"
                          [disabled]="item.qc_lock === 1" [(ngModel)]="final_result[i]" />
                        <label cFormCheckLabel>Không đạt đồng phục</label>
                      </c-form-check>
                    </div>
                  </div>

                  <div *ngIf="final_result[i] === 'false'" class="fail-options"
                    style="display: flex; flex-direction: column; align-items: baseline;">
                    <div *ngFor="let itemDetail of listFailAttendance">
                      <c-form-check>
                        <input cFormCheckInput [id]="item.key + i" type="radio" [disabled]="item.qc_lock === 1"
                          [checked]="isCheckedCI(i, itemDetail.key)" [name]="'CI-' + item.key + '-' + i"
                          (change)="handleRadioChange(i, itemDetail.key, $event,true)" />
                        <label cFormCheckLabel>
                          {{ itemDetail.label}}
                        </label>
                      </c-form-check>

                    </div>
                    <div class="w-100" *ngIf="visiableReasonAnotherCI[i]">
                      <input type="text" placeholder="Nhập lý do không đạt" [(ngModel)]="reasonAnotherFailCI[i]"
                        [disabled]="item.qc_lock === 1" style="padding:5px;" class="w-100">
                    </div>
                  </div>
                  <div style="text-align: center;" *ngIf="item.qc_lock !== 1">
                    <button (click)="updateCheckAttendance(i,'checkin')" cButton color="warning"
                      style="margin: 10px 0;">
                      Cập nhật
                      <svg cIcon name="cilSave"></svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="checkin-container">
              <label for="">Check-out</label>
              <p *ngIf="item.co_time">{{ item.co_time | date: 'dd/MM/yyyy HH:mm:ss' }}</p>
              <p *ngIf="!item.co_time">--/--/---</p>


              <div class="my-2 d-flex gap-2 justify-content-end" *ngIf="item.qc_lock !== 1">

                <div class="spinner-border text-primary" role="status" *ngIf="loadding_detect_co">
                  <span class="visually-hidden">Loading...</span>
                </div>

                <button cButton color="primary" *ngIf="item.image && item.co_photo"
                  (click)="handleDetectAI(i,item,'checkout')">
                  <svg cIcon name="cilCheckCircle"></svg> Detect
                </button>



                <button cButton color="primary" (click)="confirmChangeImage(item,i,'checkout')">
                  <svg cIcon name="cilSettings"></svg>
                </button>
              </div>

              <img *ngIf="item.co_photo" [src]="item.co_photo" alt="img-check-out" width="250" height="250"
                (click)="showImagePopup(item.co_photo ? item.co_photo : '../../../../assets/images/avatars/default-avatar.jpg')">

              <img *ngIf="!item.co_photo" src="../../../../assets/images/avatars/default-avatar.jpg" alt="" width="250"
                height="250">

              <div *ngIf="item.co_photo">
                <div style="padding: 15px;">
                  <h4 style="margin: 0 0 10px; text-align: center; font-size: 16px; font-weight: bold; color: #333;">
                    AI Detect Result
                  </h4>

                  <div style="display: flex; flex-direction: column; gap: 10px;">
                    <label style="display: flex; justify-content: space-between; align-items: center;">
                      <span>Face ID:</span>
                      <div>
                        <span>
                          {{ item.co_FaceVerifyAiOk == '1' ? 'True' : (item.co_FaceVerifyAiOk == '0' ? 'False' :
                          "__")}}
                        </span>

                        <select cSelect [(ngModel)]="item.co_FaceVerifyOk"
                          [disabled]="item.qc_lock === 1"
                          style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                          <option [value]="1">Đúng</option>
                          <option [value]="0">Sai</option>
                          <option [value]="null">---</option>
                        </select>
                      </div>
                    </label>

                    <label style="display: flex; justify-content: space-between; align-items: center;">
                      <span>Location:</span>

                      <div class="">
                        <span>
                          {{ item.co_LocationAiOk == '1' ? 'True' : (item.co_LocationAiOk == '0' ? 'False' : "__")}}
                        </span>

                        <select cSelect [(ngModel)]="item.co_LocationOk" 
                           [disabled]="item.qc_lock === 1"
                          style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                          <option [value]="1">Đúng</option>
                          <option [value]="0">Sai</option>
                          <option [value]="null">---</option>
                        </select>
                      </div>
                    </label>

                    <label style="display: flex; justify-content: space-between; align-items: center;">
                      <span>Logo:</span>

                      <div class="">
                        <span>
                          {{ item.co_brandAiOk == '1' ? 'True' : (item.co_brandAiOk == '0' ? 'False' : "__")}}
                        </span>

                        <select cSelect [(ngModel)]="item.co_brandOk" 
                          [disabled]="item.qc_lock === 1"
                          style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                          <option [value]="1">Đúng</option>
                          <option [value]="0">Sai</option>
                          <option [value]="null">---</option>
                        </select>
                      </div>
                    </label>

                  </div>
                </div>

                <div class="form-container">
                  <div class="radio-group-container" style="display: grid; gap: 10px; max-width: 500px; margin: auto;">
                    <div class="radio-row" style="display: flex; justify-content: space-between; gap: 10px;">
                      <c-form-check
                        style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                        <input cFormCheckInput type="radio" value="true" [name]="'flexRadioCheck_CO' + i"
                          [disabled]="item.qc_lock === 1" [(ngModel)]="co_final_result[i]" />
                        <label cFormCheckLabel>Đạt</label>
                      </c-form-check>

                      <c-form-check
                        style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                        <input cFormCheckInput type="radio" value="false" [name]="'flexRadioCheck_CO' + i"
                          [disabled]="item.qc_lock === 1" [(ngModel)]="co_final_result[i]" />
                        <label cFormCheckLabel>Không đạt</label>
                      </c-form-check>
                    </div>

                    <div class="radio-row" style="display: flex; justify-content: space-between; gap: 10px;">
                      <c-form-check
                        style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                        <input cFormCheckInput type="radio" value="unidentified" [name]="'flexRadioCheck_CO' + i"
                          [disabled]="item.qc_lock === 1" [(ngModel)]="co_final_result[i]" />
                        <label cFormCheckLabel>Không xác định</label>
                      </c-form-check>

                      <c-form-check
                        style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                        <input cFormCheckInput type="radio" value="wrong_unifrom" [name]="'flexRadioCheck_CO' + i"
                          [disabled]="item.qc_lock === 1" [(ngModel)]="co_final_result[i]" />
                        <label cFormCheckLabel>Không đạt đồng phục</label>
                      </c-form-check>
                    </div>
                  </div>

                  <div *ngIf="co_final_result[i] === 'false'" class="fail-options">
                    <div *ngFor="let itemFail of listFailAttendance">
                      <c-form-check>
                        <input cFormCheckInput [id]="itemFail.key + i" type="radio" [disabled]="item.qc_lock === 1"
                          [checked]="isCheckedCO(i, itemFail.key)" [name]="'CO-' + item.key + '-' + i"
                          (change)="handleRadioChange(i, itemFail.key, $event,false)" />
                        <label cFormCheckLabel>
                          {{ itemFail.label}}
                        </label>
                      </c-form-check>
                    </div>
                    <div class="w-100" *ngIf="visiableReasonAnotherCO[i]">
                      <input type="text" placeholder="Nhập lý do không đạt" [(ngModel)]="reasonAnotherFailCO[i]"
                        [disabled]="item.qc_lock === 1" style="padding:5px;" class="w-100">
                    </div>
                  </div>

                  <div *ngIf="item.qc_lock !== 1">
                    <button (click)="updateCheckAttendance(i,'checkout')" cButton color="warning"
                      style="margin: 10px 0;">
                      Cập nhật
                      <svg cIcon name="cilSave"></svg>
                    </button>
                  </div>
                </div>


              </div>
            </div>



            <div style="margin: auto 0;">
              <textarea [(ngModel)]="commentText[i]"
                style=" padding: 10px; border: 1px solid #ccc; border-radius: 5px; width: 100%;"></textarea>

              <button (click)="submitComment(item,i)" cButton color="primary"
                style="padding: 10px 15px; font-weight: bold; background-color: blue; color: white;">
                Lưu ghi chú
              </button>
            </div>


          </div>
        </td>
      </tr>


      <!-- <tr *ngIf="expandedRows[i]">
        <td colspan="14">
          <div style="display: flex; gap:20px">
            <c-card>
              <c-card-body style="text-align: center;">
                <div style="display:flex;gap:50px;">
                  <div style="padding: 15px;">
                    <label for="" style="width: 100%;font-weight: bold; ">Hình Profile</label>
                    <p>-------</p>

                    <div class="w-full">
                      <button *ngIf="item.qc_lock !== 1" class="my-2" cButton color="primary"
                        (click)="confirmUpdateImage(item,i)">
                        <svg cIcon name="cilSettings"></svg>
                      </button>
                    </div>

                    <div class="">
                      <img *ngIf="item.image" [src]="item.image" alt="img" width="250" height="250"
                        (click)="showImagePopup(item.image ? item.image : '../../../../assets/images/avatars/default-avatar.jpg')">

                      <img *ngIf="!item.image" src="../../../../assets/images/avatars/default-avatar.jpg" alt=""
                        width="250" height="250">
                    </div>


                  </div>

                  <div class="checkin-container">
                    <label for="" style="width: 100%;">Check-in</label>
                    <p *ngIf="item.ci_time">{{ item.ci_time | date: 'dd/MM/yyyy HH:mm:ss' }}</p>
                    <p *ngIf="!item.ci_time">--/--/---</p>

                    <div class="my-2 d-flex gap-2 justify-content-end" *ngIf="item.qc_lock !== 1">

                      <div class="spinner-border text-primary" role="status" *ngIf="loadding_detect_ci">
                        <span class="visually-hidden">Loading...</span>
                      </div>

                      <button cButton color="primary" *ngIf="item.image && item.ci_photo"
                        (click)="handleDetectAI(i,item,'checkin')">
                        <svg cIcon name="cilCheckCircle"></svg> Detect
                      </button>

                      <button cButton color="primary" (click)="confirmChangeImage(item,i,'checkin')">
                        <svg cIcon name="cilSettings"></svg>
                      </button>
                    </div>

                    <img *ngIf="item.ci_photo" [src]="item.ci_photo" alt="img-check-out" width="250" height="250"
                      (click)="showImagePopup(item.ci_photo ? item.ci_photo : '../../../../assets/images/avatars/default-avatar.jpg')">

                    <img *ngIf="!item.ci_photo" src="../../../../assets/images/avatars/default-avatar.jpg" alt=""
                      width="250" height="250">

                    <div *ngIf="item.ci_photo">
                      <div style="padding: 15px;">
                        <h4
                          style="margin: 0 0 10px; text-align: center; font-size: 16px; font-weight: bold; color: #333;">
                          AI Detect Result
                        </h4>

                        <div style="display: flex; flex-direction: column; gap: 10px;">
                          <label style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Face ID:</span>

                            <div class="">
                              <span>
                                {{ item.ci_FaceVerifyAiOk == '1' ? 'True' : (item.ci_FaceVerifyAiOk == '0' ? 'False' :
                                "__")}}
                              </span>
                              <select cSelect [(ngModel)]="item.ci_FaceVerifyOk"
                                (change)="updateSwitchATDAI_CI(item,'faceId')" [disabled]="item.qc_lock === 1"
                                style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                                <option [value]="1">Đúng</option>
                                <option [value]="0">Sai</option>
                                <option [value]="null">---</option>
                              </select>
                            </div>

                          </label>

                          <label style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Location:</span>

                            <div class="">
                              <span>
                                {{ item.ci_LocationAiOk == '1' ? 'True' : (item.ci_LocationAiOk == '0' ? 'False' :
                                "__")}}
                              </span>

                              <select cSelect [(ngModel)]="item.ci_LocationOk"
                                (change)="updateSwitchATDAI_CI(item,'location')" [disabled]="item.qc_lock === 1"
                                style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                                <option [value]="1">Đúng</option>
                                <option [value]="0">Sai</option>
                                <option [value]="null">---</option>
                              </select>
                            </div>
                          </label>

                          <label style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Logo:</span>
                            <div>
                              <span>
                                {{ item.ci_brandAiOk == '1' ? 'True' : (item.ci_brandAiOk == '0' ? 'False' : "__")}}
                              </span>
                              <select cSelect [(ngModel)]="item.ci_brandOk" (change)="updateSwitchATDAI_CI(item,'logo')"
                                [disabled]="item.qc_lock === 1"
                                style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                                <option [value]="1">Đúng</option>
                                <option [value]="0">Sai</option>
                                <option [value]="null">---</option>
                              </select>
                            </div>
                          </label>
                        </div>
                      </div>

                      <div class="form-container">

                        <div class="radio-group-container"
                          style="display: grid; gap: 10px; max-width: 500px; margin: auto;">
                          <div class="radio-row" style="display: flex; justify-content: space-between; gap: 10px;">
                            <c-form-check
                              style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                              <input cFormCheckInput type="radio" value="true" [name]="'flexRadioCheck' + i"
                                [disabled]="item.qc_lock === 1" [(ngModel)]="final_result[i]" />
                              <label cFormCheckLabel>Đạt</label>
                            </c-form-check>

                            <c-form-check
                              style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                              <input cFormCheckInput type="radio" value="false" [name]="'flexRadioCheck' + i"
                                [disabled]="item.qc_lock === 1" [(ngModel)]="final_result[i]" />
                              <label cFormCheckLabel>Không đạt</label>
                            </c-form-check>
                          </div>

                          <div class="radio-row" style="display: flex; justify-content: space-between; gap: 10px;">
                            <c-form-check
                              style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                              <input cFormCheckInput type="radio" value="unidentified" [name]="'flexRadioCheck' + i"
                                [disabled]="item.qc_lock === 1" [(ngModel)]="final_result[i]" />
                              <label cFormCheckLabel>Không xác định</label>
                            </c-form-check>

                            <c-form-check
                              style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                              <input cFormCheckInput type="radio" value="wrong_unifrom" [name]="'flexRadioCheck' + i"
                                [disabled]="item.qc_lock === 1" [(ngModel)]="final_result[i]" />
                              <label cFormCheckLabel>Không đạt đồng phục</label>
                            </c-form-check>
                          </div>
                        </div>

                        <div *ngIf="final_result[i] === 'false'" class="fail-options"
                          style="display: flex; flex-direction: column; align-items: baseline;">
                          <div *ngFor="let itemDetail of listFailAttendance">

                            <c-form-check>
                              <input cFormCheckInput [id]="item.key + i" type="radio" [disabled]="item.qc_lock === 1"
                                [checked]="isCheckedCI(i, itemDetail.key)" [name]="'CI-' + item.key + '-' + i"
                                (change)="handleRadioChange(i, itemDetail.key, $event,true)" />
                              <label cFormCheckLabel>
                                {{ itemDetail.label}}
                              </label>
                            </c-form-check>

                          </div>
                          <div class="w-100" *ngIf="visiableReasonAnotherCI">
                            <input type="text" placeholder="Nhập lý do không đạt" [(ngModel)]="reasonAnotherFailCI[i]"
                              [disabled]="item.qc_lock === 1" style="padding:5px;" class="w-100">
                          </div>
                        </div>
                        <div style="text-align: center;" *ngIf="item.qc_lock !== 1">
                          <button (click)="updateCheckAttendance(i,'checkin')" cButton color="warning"
                            style="margin: 10px 0;">
                            Cập nhật
                            <svg cIcon name="cilSave"></svg>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </c-card-body>
            </c-card>

            <c-card>
              <c-card-body style="text-align: center;">
                <div class="checkin-container">
                  <label for="">Check-out</label>
                  <p *ngIf="item.co_time">{{ item.co_time | date: 'dd/MM/yyyy HH:mm:ss' }}</p>
                  <p *ngIf="!item.co_time">--/--/---</p>


                  <div class="my-2 d-flex gap-2 justify-content-end" *ngIf="item.qc_lock !== 1">

                    <div class="spinner-border text-primary" role="status" *ngIf="loadding_detect_co">
                      <span class="visually-hidden">Loading...</span>
                    </div>

                    <button cButton color="primary" *ngIf="item.image && item.co_photo"
                      (click)="handleDetectAI(i,item,'checkout')">
                      <svg cIcon name="cilCheckCircle"></svg> Detect
                    </button>



                    <button cButton color="primary" (click)="confirmChangeImage(item,i,'checkout')">
                      <svg cIcon name="cilSettings"></svg>
                    </button>
                  </div>

                  <img *ngIf="item.co_photo" [src]="item.co_photo" alt="img-check-out" width="250" height="250"
                    (click)="showImagePopup(item.co_photo ? item.co_photo : '../../../../assets/images/avatars/default-avatar.jpg')">

                  <img *ngIf="!item.co_photo" src="../../../../assets/images/avatars/default-avatar.jpg" alt=""
                    width="250" height="250">

                  <div *ngIf="item.co_photo">
                    <div style="padding: 15px;">
                      <h4
                        style="margin: 0 0 10px; text-align: center; font-size: 16px; font-weight: bold; color: #333;">
                        AI Detect Result
                      </h4>

                      <div style="display: flex; flex-direction: column; gap: 10px;">
                        <label style="display: flex; justify-content: space-between; align-items: center;">
                          <span>Face ID:</span>
                          <div>
                            <span>
                              {{ item.co_FaceVerifyAiOk == '1' ? 'True' : (item.co_FaceVerifyAiOk == '0' ? 'False' :
                              "__")}}
                            </span>

                            <select cSelect [(ngModel)]="item.co_FaceVerifyOk"
                              (change)="updateSwitchATDAI_CO(item,'faceId')" [disabled]="item.qc_lock === 1"
                              style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                              <option [value]="1">Đúng</option>
                              <option [value]="0">Sai</option>
                              <option [value]="null">---</option>
                            </select>
                          </div>
                        </label>

                        <label style="display: flex; justify-content: space-between; align-items: center;">
                          <span>Location:</span>

                          <div class="">
                            <span>
                              {{ item.co_LocationAiOk == '1' ? 'True' : (item.co_LocationAiOk == '0' ? 'False' : "__")}}
                            </span>

                            <select cSelect [(ngModel)]="item.co_LocationOk"
                              (change)="updateSwitchATDAI_CO(item,'location')" [disabled]="item.qc_lock === 1"
                              style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                              <option [value]="1">Đúng</option>
                              <option [value]="0">Sai</option>
                              <option [value]="null">---</option>
                            </select>
                          </div>
                        </label>

                        <label style="display: flex; justify-content: space-between; align-items: center;">
                          <span>Logo:</span>

                          <div class="">
                            <span>
                              {{ item.co_brandAiOk == '1' ? 'True' : (item.co_brandAiOk == '0' ? 'False' : "__")}}
                            </span>

                            <select cSelect [(ngModel)]="item.co_brandOk" (change)="updateSwitchATDAI_CO(item,'logo')"
                              [disabled]="item.qc_lock === 1"
                              style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
                              <option [value]="1">Đúng</option>
                              <option [value]="0">Sai</option>
                              <option [value]="null">---</option>
                            </select>
                          </div>
                        </label>

                      </div>
                    </div>

                    <div class="form-container">
                      <div class="radio-group-container"
                        style="display: grid; gap: 10px; max-width: 500px; margin: auto;">
                        <div class="radio-row" style="display: flex; justify-content: space-between; gap: 10px;">
                          <c-form-check
                            style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                            <input cFormCheckInput type="radio" value="true" [name]="'flexRadioCheck_CO' + i"
                              [disabled]="item.qc_lock === 1" [(ngModel)]="co_final_result[i]" />
                            <label cFormCheckLabel>Đạt</label>
                          </c-form-check>

                          <c-form-check
                            style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                            <input cFormCheckInput type="radio" value="false" [name]="'flexRadioCheck_CO' + i"
                              [disabled]="item.qc_lock === 1" [(ngModel)]="co_final_result[i]" />
                            <label cFormCheckLabel>Không đạt</label>
                          </c-form-check>
                        </div>

                        <div class="radio-row" style="display: flex; justify-content: space-between; gap: 10px;">
                          <c-form-check
                            style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                            <input cFormCheckInput type="radio" value="unidentified" [name]="'flexRadioCheck_CO' + i"
                              [disabled]="item.qc_lock === 1" [(ngModel)]="co_final_result[i]" />
                            <label cFormCheckLabel>Không xác định</label>
                          </c-form-check>

                          <c-form-check
                            style="flex: 1; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                            <input cFormCheckInput type="radio" value="wrong_unifrom" [name]="'flexRadioCheck_CO' + i"
                              [disabled]="item.qc_lock === 1" [(ngModel)]="co_final_result[i]" />
                            <label cFormCheckLabel>Không đạt đồng phục</label>
                          </c-form-check>
                        </div>
                      </div>

                      <div *ngIf="co_final_result[i] === 'false'" class="fail-options">
                        <div *ngFor="let itemFail of listFailAttendance">
                          <c-form-check>
                            <input cFormCheckInput [id]="itemFail.key + i" type="radio" [disabled]="item.qc_lock === 1"
                              [checked]="isCheckedCO(i, itemFail.key)" [name]="'CO-' + item.key + '-' + i"
                              (change)="handleRadioChange(i, itemFail.key, $event,false)" />
                            <label cFormCheckLabel>
                              {{ itemFail.label}}
                            </label>
                          </c-form-check>
                        </div>
                        <div class="w-100" *ngIf="visiableReasonAnotherCO">
                          <input type="text" placeholder="Nhập lý do không đạt" [(ngModel)]="reasonAnotherFailCO[i]"
                            [disabled]="item.qc_lock === 1" style="padding:5px;" class="w-100">
                        </div>
                      </div>

                      <div *ngIf="item.qc_lock !== 1">
                        <button (click)="updateCheckAttendance(i,'checkout')" cButton color="warning"
                          style="margin: 10px 0;">
                          Cập nhật
                          <svg cIcon name="cilSave"></svg>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

              </c-card-body>

            </c-card>

            <div style="margin: auto 0;">
              <textarea [(ngModel)]="commentText[i]"
                style=" padding: 10px; border: 1px solid #ccc; border-radius: 5px; width: 100%;"></textarea>

              <button (click)="submitComment(item,i)" cButton color="primary"
                style="padding: 10px 15px; font-weight: bold; background-color: blue; color: white;">
                Lưu ghi chú
              </button>
            </div>

          </div>
        </td>
      <tr> -->




    </ng-container>
  </tbody>
</table>

<!-- Popup -->
<div *ngIf="selectedImage" style="
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9000;
  " (click)="closePopup()">
  <img [src]="selectedImage" alt="Popup"
    style="max-width: 90%; max-height: 90%; border: 5px solid white; border-radius: 8px;"
    (click)="$event.stopPropagation()">
</div>

<c-modal [(visible)]="confirmLockVisible">
  <c-modal-header>
    <h5 class="modal-title">Xác nhận</h5>
    <button class="btn-close" (click)="confirmLockVisible = false"></button>
  </c-modal-header>

  <c-modal-body>
    {{ itemLock == 1
    ? 'Bạn có chắc chắn muốn mở khoá kết quả này không?'
    : 'Bạn có chắc chắn muốn khoá kết quả này không?' }}
  </c-modal-body>

  <c-modal-footer>
    <button class="btn btn-secondary" (click)="confirmLockVisible = false">Hủy</button>
    <button class="btn btn-primary" (click)="confirmAction()">Xác nhận</button>
  </c-modal-footer>
</c-modal>

<c-modal [(visible)]="visableModalChangeImage">
  <c-modal-header>
    <h5 class="modal-title">Xác nhận thay hình profile</h5>
    <button class="btn-close" (click)="visableModalChangeImage = false"></button>
  </c-modal-header>
  <c-modal-body>
    Bạn có chắc chắn muốn thay đổi hình profile cho nhân viên này không?
  </c-modal-body>
  <c-modal-footer>
    <button class="btn btn-secondary" (click)="visableModalChangeImage = false">Hủy</button>
    <button class="btn btn-primary" (click)="confirmActionChangeImage()">Xác nhận</button>
  </c-modal-footer>
</c-modal>

<c-modal [(visible)]="visableModalUpdateImage">
  <c-modal-header>
    <h5 class="modal-title">Update hình profile</h5>
    <button class="btn-close" (click)="visableModalUpdateImage = false"></button>
  </c-modal-header>
  <c-modal-body>
    <c-input-group class="input-prepend">
      <input cFormControl id="fileImg" placeholder="Nhập hình báo cáo" type="file" (change)="onFileSelected($event)" />
    </c-input-group>
  </c-modal-body>
  <c-modal-footer>
    <button class="btn btn-secondary" (click)="visableModalUpdateImage = false">Hủy</button>
    <button class="btn btn-primary" (click)="handleUpdateImg()">Xác nhận</button>
  </c-modal-footer>
</c-modal>



<div style="display: flex; gap: 10px;" *ngIf="listAttendance">
  <c-smart-pagination *ngIf="listAttendance" [activePage]="currentPage" [pages]="pagination" align="center"
    (activePageChange)="onPageChange($event)">
  </c-smart-pagination>

  <input type="number" [(ngModel)]="gotoPage" (keyup.enter)="jumpToPage()" min="1" [max]="pagination"
    style="width: 80px; height: 36px; padding: 5px; border: 1px solid #ccc; border-radius: 5px;     text-align: center;" />
</div>


<div class="position-fixed end-0 bottom-0 m-4" style="cursor: pointer" (click)="handleScrollOnTop()">
  <svg cIcon name="cilArrowCircleTop" class="bg-white rounded p-2" style="width: 40px; height: 40px;"></svg>
</div>

<ngx-loading-bar [height]="'5px'" color="#ff0000"></ngx-loading-bar>
<!-- <router-outlet></router-outlet> -->